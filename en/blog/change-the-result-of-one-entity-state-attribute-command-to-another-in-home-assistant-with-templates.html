<!DOCTYPE html><html lang="en-GB"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="icon" href="/assets/images/logo.png"><title>Change the result of an entityâ€™s state attribute - Haade.fr</title><meta name="description" content="In this mini tutorial I will show you how to change the entity state attribute result to another using templates in Home-Assistant"><meta name="author" content="Nico"><link rel="canonical" href="https://haade.fr/en/blog/change-the-result-of-one-entity-state-attribute-command-to-another-in-home-assistant-with-templates"><link rel="alternate" hreflang="en" href="https://haade.fr/en/blog/change-the-result-of-one-entity-state-attribute-command-to-another-in-home-assistant-with-templates"/><link rel="alternate" hreflang="fr" href="https://haade.fr/fr/blog/changer-le-resultat-d-une-commande-d-attribut-d-etat-d-entite-par-une-autre-dans-home-assistant-avec-les-templates"/><meta property="og:locale" content="fr-FR"><meta property="og:type" content="article"><meta property="og:title" content="Change the result of an entityâ€™s state attribute"><meta property="og:description" content="In this mini tutorial I will show you how to change the entity state attribute result to another using templates in Home-Assistant"><meta property="og:url" content="https://haade.fr/en/blog/change-the-result-of-one-entity-state-attribute-command-to-another-in-home-assistant-with-templates"><meta property="og:site_name" content="Haade.fr"><meta property="og:image" content="https://haade.fr/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template.png"><meta property="article:author" content="Nico"><meta property="article:published_time" content="2024-04-29T23:45:00+02:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "BlogPosting", "url": "https://haade.fr/en/blog/change-the-result-of-one-entity-state-attribute-command-to-another-in-home-assistant-with-templates", "name": "Change the result of an entity's state attribute", "headline": "Change the result of an entity's state attribute", "keywords": "Haade-lab,Mini-tutos", "description": "In this mini tutorial I will show you how to change the entity state attribute result to another using templates in Home-Assistant", "articleBody": "In the previous article I showed you how to create an average of states on entities, by making a call on an entity state states() which directly reports the state of this entity.\nToday is different, Iâ€™m going to show you how to work with entity state attributes.\n\nPrerequisites\n\nHome Assistant installed\n\n\n \n\n \n \n \n Box HomeAssistant Green\n By Nabu Casa\n Box Home Assistant Green on sale at domadoo for less than â‚¬100\n \n \n \n \n Buy Now out of Domadoo\n \n \n \n \n \n \n\n\nfind all functions of an entity\n\nNothing could be simpler, go to:\n\nDevelopment tools &gt; states tab, then you search using the filters\n\n\n\nInfo: you can also work on the state attributes of entities directly in the scenarios (automations) of Home Assistant and yes for a short time they have been listed according to the previously selected entity, I find it rewarding.\n\n\n\nIn short, during the installation at August of thermostatic valves from different brands, I needed to standardize the results of the commands in order to be able to work more easily in the automations.\n\nTemplate and entity\n\nTo create a template, nothing could be simpler, go to home assistant\n\n\n Parameters/inputs/create-an-input/template/Model-a-sensor\n\n\nCode explanation\n\nbelow the code, you do not have to put the tag {{ result }} which is there mainly to read the result of the command .\n\nWhat I did, I retrieve the state attribute running state of the entity climate.thermostat_salon and I put a condition if the result is heat, the transform into result on otherwise off\n\nthe running_state function of a thermostatic module generally responds to Idle or Heat, but in my case I had a thermostatic valve Aqara SRTS -01 which did not have this function so I had to adapt a code and in home-assistant it is largely doable.\n\nTime for code explanations\n\nWe save the result of the running_state state attribute\n\n{%- set result = state_attr('climate.thermostat_salon', 'running_state') %}\n\nIf the default result is heat\n\n{%- if result == 'heat' %}\n\nWe transform it into On\n{%- set result = 'on' %}\n\nOtherwise Off\n{%- else %}\n{%- set result = 'off' %}\n\n{%- set result = state_attr(&#39;climate.thermostat_salon&#39;, &#39;running_state&#39;) %}\n{%- if result == &#39;heat&#39; %}\n{%- set result = &#39;on&#39; %}\n{{ result }}\n{%- else %}\n{%- set result = &#39;off&#39; %}\n{{ result }}\n{%- endif %}\n\nConclusion\n\nThanks to this mini-tutorial you will be able to take your first steps in home-assistant templates and transform the results of an entityâ€™s state attributes.\n", "datePublished": "2024-04-29 23:45:00 +0200", "dateModified": "2024-04-29 23:45:00 +0200", "inLanguage": "en-GB", "author": { "@type": "Person", "name": "Nico", "alternateName": "Nico", "description": "Founding member of the Haade site, a home automation enthusiast with all the tricks that go well.", "url": "/fr/auteur-nico/","image": "https://haade.fr/nico.jpg","email": "nico@haade.fr" }, "publisher": { "@type": "Organization", "name": "Haade.fr", "url": "https://haade.fr", "logo": { "@type": "ImageObject", "width": 250, "height": 63, "url": "https://haade.fr/assets/images/logo.png" } }, "mainEntityOfPage": { "@type": "WebPage", "@id": "https://haade.fr/en/blog/change-the-result-of-one-entity-state-attribute-command-to-another-in-home-assistant-with-templates" }, "image": { "@type": "ImageObject", "width": 250, "height": 94, "url": "https://haade.fr/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template.png" } } </script><link href="/assets/css/theme.css?v=1726754673044690212" media="screen, projection, print" rel="stylesheet"> <script data-goatcounter="https://haade.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><link rel="preload" href="/assets/fonts/montserrat/Montserrat-VariableFont_wght.woff2" as="font" crossorigin><link rel="preload" href="/assets/fonts/icomoon/icomoon.woff2?4fpajq" as="font" crossorigin><link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico" ><link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png" ><header><div class="firstnavbar"><div class="links"> <a href="/en/">Home</a> <a href="/en/gdpr-general-data-protection-regulation/">GDPR</a> <a href="/en/contact/">Contact</a><div class="sl-nav"> language:<ul><li><b>English</b> <i class="ico angle-down-solid triangle-arrow trrow" aria-hidden="true"></i><div class="triangle"></div><ul class="show-flags"><li><a href="/fr/blog/changer-le-resultat-d-une-commande-d-attribut-d-etat-d-entite-par-une-autre-dans-home-assistant-avec-les-templates"><i class="sl-flag fix flag-fr"><div id="Francais"></div></i><span class="active">Francais</span></a><li class="current"><a href="/en/blog/change-the-result-of-one-entity-state-attribute-command-to-another-in-home-assistant-with-templates"><i class="sl-flag fix flag-england"><div id="English"></div></i><span class="active">English</span></a></ul></ul></div></div><div class="social-firstnav"> <a href="https://github.com/haade-administrator/haade.fr/discussions" target="_blank" alt="github discussion link" aria-label="Continue the discussion on the github forum"><i class="icob github" width="1em" height="1em" aria-hidden="true" title="github discussion"></i></a> <a href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w/?sub_confirmation=1" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Subscribe to our youtube channel"><i class="icob youtube" width="1em" height="1em" target="_blank" alt="youtube" aria-hidden="true" title="youtube"></i></a> <a href="https://discord.gg/FaK6MuZ2" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Invitation to our Discord network"><i class="icob discord" width="1em" height="1em" target="_blank" alt="discord" aria-hidden="true" title="discord"></i></a> <a href="/en/feed.xml" target="_blank" alt="feed rss" aria-label="share the rss feed with your friends"><i class="icob rss" width="1em" height="1em" aria-hidden="true" title="feed rss haade"></i></a></div></div><div class="secondheader"> <a class="navbar-brand" href="/en/"><picture> <source sizes="(max-width: 524px) 150px, 250px" srcset="https://haade.fr/assets/images/generated/logo-150-379587352.webp 150w, https://haade.fr/assets/images/generated/logo-250-379587352.webp 250w" type="image/webp"> <source sizes="(max-width: 524px) 150px, 250px" srcset="https://haade.fr/assets/images/generated/logo-150-64f85a78e.png 150w, https://haade.fr/assets/images/generated/logo-250-64f85a78e.png 250w" type="image/png"> <img id="logoIImage" src="https://haade.fr/assets/images/generated/logo-250-64f85a78e.png" alt="Logo officiel du site domotique Haade" width="250" height="94"> </picture> </a><p class="sitetag"> Home Assistance Alsace home automation & electronics.</p></div><nav id="nav"><div class="navbar"> <i class='icos bars-solid'></i><div class="nav-links"><div class="sidebar-logo"> <span class="logo-name">H2Ade</span> <i class='icos times-solid'></i></div><ul class="links"><li><a href="/en/">Home<span class="badge badge-light tags">127</span></a><li> <a href="https://haade.fr/en/category/automation">Automation</a> <i class="icos angle-down-solid htmlcss-arrow-automation arrow"></i><ul class="htmlCss-sub-menu-automation sub-menu"><li><a href="/en/category/security">Security</a><li class="more"> <span><a href="/en/category/haade-lab">Tutos</a> <i class='icos angle-right-solid arrow more-arrow-automation'></i> </span><ul class="more-sub-menu-automation sub-menu"><li><a href="/en/category/mini-tutos">Mini-tutorials</a><li><a href="/en/category/videos">Videos</a><li><a href="/en/category/home-assistant">Home-Assistant</a><li><a href="/en/category/jeedom">Jeedom</a></ul></ul><li><a href="/en/category/news">News</a><li><a href="/en/category/tests">Tests</a><li><a href="/en/authors">Contributors<span class="badge badge-primary">News</span></a><li><a target="_blank" href="https://github.com/haade-administrator/haade.fr/discussions">Forum</a><li><a href="/en/category-product/shop">Shop</a> <i class="icos angle-down-solid htmlcss-arrow-shop arrow"></i><ul class="htmlCss-sub-menu-shop sub-menu"><li class="more"> <span><a href="#">Brand</a> <i class='icos angle-right-solid arrow more-arrow-brand'></i> </span><ul class="more-sub-menu-brand sub-menu"><li><a href="/en/category-product/jeedom">Jeedom</a><li><a href="/en/category-product/moes">Moes</a><li><a href="/en/category-product/neo-coolcam">Neo-Coolcam</a><li><a href="/en/category-product/nodon">Nodon</a><li><a href="/en/category-product/raspberry-pi">Raspberry-pi</a><li><a href="/en/category-product/shelly">Shelly</a><li><a href="/en/category-product/sonoff">Sonoff</a><li><a href="/en/category-product/tedee">Tedee</a><li><a href="/en/category-product/xiaomi">Xiaomi</a><li><a href="/en/category-product/zemismart">Zemismart</a><li><a href="/en/category-product/zooz">Zooz</a></ul><li class="more"> <span><a href="#">Protocol</a> <i class='ico angle-right-solid arrow more-arrow-protocol'></i> </span><ul class="more-sub-menu-protocol sub-menu"><li><a href="/en/category-product/bluetooth">Bluetooth</a><li><a href="/en/category-product/esp">Esp 32/8266</a><li><a href="/en/category-product/matter">Matter</a><li><a href="/en/category-product/wifi">Wifi</a><li><a href="/en/category-product/zigbee">Zigbee</a><li><a href="/en/category-product/zwave">Z-wave</a></ul></ul><li><div class="sl-nav"> language:<ul><li><b>English</b> <i class="ico angle-down-solid triangle-arrow trrow" aria-hidden="true"></i><div class="triangle"></div><ul class="show-flags"><li><a href="/fr/blog/changer-le-resultat-d-une-commande-d-attribut-d-etat-d-entite-par-une-autre-dans-home-assistant-avec-les-templates"><i class="sl-flag fix flag-fr"><div id="Francais"></div></i><span class="active">Francais</span></a><li class="current"><a href="/en/blog/change-the-result-of-one-entity-state-attribute-command-to-another-in-home-assistant-with-templates"><i class="sl-flag fix flag-england"><div id="English"></div></i><span class="active">English</span></a></ul></ul></div></ul></div><script src="/assets/js/lunr.min.js?v=a944ea77ca394dff9a667d5aea56f0e9" type="text/javascript"></script><div class="search-box"> <i class='icos search-solid'></i><div class="input-box"> <form onSubmit="return lunr_search(document.getElementById('lunrsearch').value);" class="search-form" role="search"> <input autocomplete="on" id="lunrsearch" class="search-input" name="q" maxlength="200" placeholder="Search..." type="search" value=""> <input class="search-action" type="submit" value="Ok"> </form></div><div id="lunrsearchresults"><ul></ul></div></div></div></nav></header><div class="site-content"><div class="container"><div class="main-content"> <script> var addViews = ""; var addViewsValue = parseInt(addViews); var r = new XMLHttpRequest(); r.addEventListener('load', function() { var visits = parseInt(JSON.parse(this.responseText).count.replace(/\s/g, '')); var totalVisits = visits; if (!isNaN(addViewsValue)) { totalVisits += addViewsValue; } document.getElementById('visits').innerText = totalVisits; }); r.open('GET', 'https://haade.goatcounter.com/counter/' + encodeURIComponent(location.pathname) + '.json'); r.send(); </script><div class="entry-header"><nav class="ariane"><ol class="arianefil" itemscope itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a itemprop="item" href="https://haade.fr/en/"><span itemprop="name">Home</span></a><meta itemprop="position" content="1"><li><span class="prompt">&nbsp; > &nbsp;</span><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="https://haade.fr/en/category/haade-lab"><span itemprop="name">Haade-lab</span></a><meta itemprop="position" content="2"><li><span class="prompt">&nbsp; > &nbsp;</span>Change the result of an entity's state attribute</ol></nav><h1 class="posttitle">Change the result of an entity's state attribute</h1><div class="d-flex align-items-start mt-4"><div class="authorpost"> <a href="/en/author-nico"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-60-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-60-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="60" height="60" src="https://haade.fr/assets/images/generated/nico-60-78aa7390f.jpg" alt="Nico"> </picture> </a> Writing by <a href="/en/author-nico"><b>Nico</b></a></div><div class="readingpost">&nbsp;<i class="icos calendar-check" width="1em" height="1em"></i> <span class="post-date"><time class="post-date" datetime="29-04-2024">29<sup>th</sup>April 2024 &nbsp; </time></span> <span><span class="reading-time" title="Estimated read time"> <i class="icos history" width="1em" height="1em"></i> <strong> 3 min</strong> of reading </span> </span><p><i class="icos eye-solid" width="1em" height="1em"></i> This page has been visited <span id="visits" style="font-weight:bold">...</span> times</p></div></div></div><div class="entry-featured-image"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) 800px, (min-width: 1025px) 940px, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-300-0bebd13d0.webp 300w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-400-0bebd13d0.webp 400w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-500-0bebd13d0.webp 500w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-600-0bebd13d0.webp 600w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-700-0bebd13d0.webp 700w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-800-0bebd13d0.webp 800w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-900-0bebd13d0.webp 900w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-940-0bebd13d0.webp 940w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) 800px, (min-width: 1025px) 940px, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-300-0bebd13d0.png 300w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-400-0bebd13d0.png 400w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-500-0bebd13d0.png 500w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-600-0bebd13d0.png 600w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-700-0bebd13d0.png 700w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-800-0bebd13d0.png 800w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-900-0bebd13d0.png 900w, https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-940-0bebd13d0.png 940w" type="image/png"> <img class="lazyload featured-image-post" width="940" height="529" itemprop="image" src="https://haade.fr/assets/images/generated/posts/122/home-assistant-mini-tutos-haade-lab-create-an-average-on-entities-with-template-940-0bebd13d0.png" alt="Change the result of an entity's state attribute"> </picture></div><div class="article-post"><p><em></em></p><div class="toc mt-4 mb-4 lead"><h3 class="font-weight-bold">Sommary</h3><ul class="table_of"><li class="toc"><a href="#prerequisites" class="toc_anchor">Prerequisites</a><li class="toc"><a href="#find-all-functions-of-an-entity" class="toc_anchor">find all functions of an entity</a><li class="toc"><a href="#template-and-entity" class="toc_anchor">Template and entity</a><li class="toc"><a href="#code-explanation" class="toc_anchor">Code explanation</a><ul class="toc_sub"><li class="toc"><a href="#time-for-code-explanations" class="toc_anchor">Time for code explanations</a></ul><li class="toc"><a href="#conclusion" class="toc_anchor">Conclusion</a></ul></div><div class="content-post"><p>In the previous article I showed you how to <a href="/en/blog/home-assistant-Template-make-averages-of-multiple-entities">create an average of states on entities</a>, by making a call on an entity state <code>states()</code> which directly reports the state of this entity. Today is different, Iâ€™m going to show you <strong>how to work with entity state attributes</strong>.</p><h2 id="prerequisites">Prerequisites</h2><p><strong>Home Assistant installed</strong></p><div class="embedproduct"><div class="embedproduct-picture"><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/122/Home-Assistant-Green-240-584f1743f.webp 240w, https://haade.fr/assets/images/generated/posts/122/Home-Assistant-Green-250-584f1743f.webp 250w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/122/Home-Assistant-Green-240-584f1743f.png 240w, https://haade.fr/assets/images/generated/posts/122/Home-Assistant-Green-250-584f1743f.png 250w" type="image/png" /><img class="pictinpost lazyload" width="250" height="250" src="https://haade.fr/assets/images/generated/posts/122/Home-Assistant-Green-240-584f1743f.png" alt="Box Home Assistant Green on sale at domadoo for less than â‚¬100" /></picture></div><div class="text"><div class="embedproduct-info"><h2 class="no_toc">Box HomeAssistant Green</h2><h3 class="no_toc">By Nabu Casa</h3><p>Box Home Assistant Green on sale at domadoo for less than â‚¬100</p></div><div class="embedproduct-price"><div class="embedaffiliate"> <span class="dombutton" role="button"><a href="https://www.domadoo.fr/en/smart-home-gateway/7046-nabu-casa-home-assistant-green-smart-home-hub-0794677011758.html?domid=39" target="_blank" rel="nofollow noopener"><img src="/assets/images/domadoo.png" width="20" height="20" class="lazyload" alt="domadoo logo" /> Buy Now out of Domadoo</a></span></div></div></div></div><h2 id="find-all-functions-of-an-entity">find all functions of an entity</h2><p>Nothing could be simpler, go to:</p><p><strong>Development tools &gt; states tab</strong>, then you search using the filters</p><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-240-01ee5c0ae.webp 240w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-300-01ee5c0ae.webp 300w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-400-01ee5c0ae.webp 400w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-480-01ee5c0ae.webp 480w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-698-01ee5c0ae.webp 698w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-820-01ee5c0ae.webp 820w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-240-01ee5c0ae.png 240w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-300-01ee5c0ae.png 300w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-400-01ee5c0ae.png 400w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-480-01ee5c0ae.png 480w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-698-01ee5c0ae.png 698w, https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-820-01ee5c0ae.png 820w" type="image/png" /><img class="pictinpost lazyload" width="940" height="757" src="https://haade.fr/assets/images/generated/posts/122/recherche-etat-entite-et-attribut-entite-home-assistant-240-01ee5c0ae.png" alt="finding information about state and state attribute on entity" /></picture><p><strong>Info:</strong> you can also work on the state attributes of entities directly in the <strong>scenarios (automations)</strong> of Home Assistant and <strong>yes</strong> for a short time they have been listed according to the previously selected entity, <em>I find it rewarding.</em></p><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-240-d089cd83a.webp 240w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-300-d089cd83a.webp 300w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-400-d089cd83a.webp 400w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-480-d089cd83a.webp 480w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-698-d089cd83a.webp 698w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-820-d089cd83a.webp 820w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-240-d089cd83a.png 240w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-300-d089cd83a.png 300w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-400-d089cd83a.png 400w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-480-d089cd83a.png 480w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-698-d089cd83a.png 698w, https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-820-d089cd83a.png 820w" type="image/png" /><img class="pictinpost lazyload" width="940" height="650" src="https://haade.fr/assets/images/generated/posts/122/gestion-attribut-etat-entite-scenario-automatisation-home-assistant-240-d089cd83a.png" alt="management of entity attributes directly in a home assistant automation" /></picture><p>In short, during the installation at <strong>August</strong> of thermostatic valves from different brands, I needed to standardize the results of the commands in order to be able to work more easily in the automations.</p><h2 id="template-and-entity">Template and entity</h2><p>To create a template, nothing could be simpler, go to home assistant</p><blockquote><p>Parameters/inputs/create-an-input/template/Model-a-sensor</p></blockquote><h2 id="code-explanation">Code explanation</h2><p>below the code, you do not have to put the tag <code>{{ result }}</code> which is there mainly to <strong>read the result of the command .</strong></p><p>What I did, I retrieve the state attribute <strong>running state</strong> of the entity <strong>climate.thermostat_salon</strong> and I put a condition if the result is <code>heat</code>, the transform into result <code>on</code> otherwise <code>off</code></p><p>the <code>running_state</code> function of a thermostatic module generally responds to <code>Idle</code> or <code>Heat</code>, but in my case I had a thermostatic valve <a href="/en/product/thermostatic-head-aqara-srts-a01-e1-zigbee">Aqara SRTS -01</a> which did not have this function so I had to adapt a code <em>and in home-assistant it is largely doable.</em></p><h3 id="time-for-code-explanations">Time for code explanations</h3><p><strong>We save the result of the running_state state attribute</strong></p><p><code>{%- set result = state_attr('climate.thermostat_salon', 'running_state') %}</code></p><p><strong>If the default result is <em>heat</em></strong></p><p><code>{%- if result == 'heat' %}</code></p><p><strong>We transform it into <em>On</em></strong> <code>{%- set result = 'on' %}</code></p><p><strong>Otherwise <em>Off</em></strong> <code>{%- else %}</code> <code>{%- set result = 'off' %}</code></p><figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">{%- set result = state_attr(&#39;climate.thermostat_salon&#39;, &#39;running_state&#39;) %}
{%- if result == &#39;heat&#39; %}
{%- set result = &#39;on&#39; %}
{{ result }}
{%- else %}
{%- set result = &#39;off&#39; %}
{{ result }}
{%- endif %}</code></pre></figure><h2 id="conclusion">Conclusion</h2><p>Thanks to this mini-tutorial you will be able to take your first steps in home-assistant templates and <strong>transform the results of an entityâ€™s state attributes</strong>.</p></div></div><div class="authorbox mb-5 mt-5 pt-4 pb-4" itemscope itemtype="https://schema.org/Person"><div class="row"><div class="wrapavname col-md-3 text-center"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-110-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-110-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="110" height="110" src="https://haade.fr/assets/images/generated/nico-110-78aa7390f.jpg" alt="Nico"> </picture><p class="mt-4 mb-0 small text-center"> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="url" href="/fr/auteur-nico/"><i class="ico link-solid"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w"><i class="icob youtube"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://github.com/haade-administrator"><i class="icob github"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://discordapp.com/widget?id=637642871738073091&theme=dark&username=Nicoxygen#5644"><i class="icob discord"></i></a> <a class="d-inline-block mx-1 text-dark" itemprop="email" href="mailto:nico@haade.fr"><i class="ico envelope-solid"></i></a></p></div><div class="col-md-9"><h4 itemprop="name">Nico</h4><p class="mt-3 mb-0" itemprop="description">Founding member of the Haade site, a home automation enthusiast with all the tricks that go well.</p></div></div></div><div class="comments mt-5"> <button class="btn btn-outline-dark py-2 px-5 d-block w-100 show-comments"><i class="ico comments-solid text-muted"></i> &nbsp; Load the Comments</button><div id="comments"><h4 class="mb-4">Comments</h4><script src="https://giscus.app/client.js" data-repo=haade-administrator/haade.fr data-repo-id=R_kgDOHxeeuA data-category=Comments data-category-id=DIC_kwDOHxeeuM4CTn1C data-mapping=title data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-theme=light data-input-position=top data-loading=lazy data-lang=en crossorigin=anonymous async> </script><div class="clearfix"></div></div></div><div class=" related-posts"><h2 class="text-center mb-4">Articles that might interest you</h2><div class="d-flex justify-content-center align-items-center"> <a class="smoothscroll badge badge-primary text-capitalize" href="/en/category/haade-lab">Haade-lab</a> <a class="smoothscroll badge badge-primary text-capitalize" href="/en/category/mini-tutos">Mini-tutos</a></div><div class="blog-grid-container"><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/en/blog/discovery-switches-z-wave-shelly-1-PM-and-1-PM-mini-switches-and-association-management"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-300-04ef91fb1.webp 300w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-400-04ef91fb1.webp 400w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-500-04ef91fb1.webp 500w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-600-04ef91fb1.webp 600w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-700-04ef91fb1.webp 700w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-800-04ef91fb1.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-300-04ef91fb1.png 300w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-400-04ef91fb1.png 400w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-500-04ef91fb1.png 500w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-600-04ef91fb1.png 600w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-700-04ef91fb1.png 700w, https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-800-04ef91fb1.png 800w" type="image/png"> <img class="img-thumb lazyload" src="https://haade.fr/assets/images/generated/posts/136/decouverte-shelly-z-wave-1-PM-et-1-PM-Mini-800-04ef91fb1.png" alt="Discovering the Shelly Wave 1PM and mini switches" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/en/blog/discovery-switches-z-wave-shelly-1-PM-and-1-PM-mini-switches-and-association-management">Discovering the Shelly Wave 1PM and mini switches</a><div class="mb-2 mt-2 font-weight-normal"><div class="rating-holder"><div class="Stars" style="--rating: 5.0; --star-background: #FF6600" title="Rating of this product is 5.0 out of 5."></div></div></div></h2><p class="card-text">Discovery of the Z-wave 800 modules Shelly wave 1 PM and 1 PM mini, what are their particularities, and their differences. Are they up to par? for the price and...</p></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/en/author-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">28<sup>th</sup>July 2024</span> </span><div class="clearfix"></div></div></div></div></div><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/en/blog/test-welock-SECB-BL51-fingerprint-lock-the-key-killer"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-300-bc6b71749.webp 300w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-400-bc6b71749.webp 400w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-500-bc6b71749.webp 500w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-600-bc6b71749.webp 600w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-700-bc6b71749.webp 700w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-800-bc6b71749.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-300-bc6b71749.png 300w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-400-bc6b71749.png 400w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-500-bc6b71749.png 500w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-600-bc6b71749.png 600w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-700-bc6b71749.png 700w, https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-800-bc6b71749.png 800w" type="image/png"> <img class="img-thumb lazyload" src="https://haade.fr/assets/images/generated/posts/134/welock-test-SECBNEBL51-fingerprint-lock-the-key-killer-800-bc6b71749.png" alt="Welock SECBNEBL51 fingerprint lock review" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/en/blog/test-welock-SECB-BL51-fingerprint-lock-the-key-killer">Welock SECBNEBL51 fingerprint lock review</a><div class="mb-2 mt-2 font-weight-normal"><div class="rating-holder"><div class="Stars" style="--rating: 3.8; --star-background: #FF6600" title="Rating of this product is 3.8 out of 5."></div></div></div></h2><p class="card-text">Today I am going to present to you a but not too connected fingerprint lock, the Welock SECBNEBL51. Why but not too much, I find that the connected function is...</p></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/en/author-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">17<sup>th</sup>July 2024</span> </span><div class="clearfix"></div></div></div></div></div><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/en/blog/manufacture-a-high-performance-and-cheap-nas-amazon-renewed-and-proxmox-omv-truenas-home-assistant"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-300-977c5f664.webp 300w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-400-977c5f664.webp 400w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-500-977c5f664.webp 500w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-600-977c5f664.webp 600w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-700-977c5f664.webp 700w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-800-977c5f664.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-300-977c5f664.png 300w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-400-977c5f664.png 400w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-500-977c5f664.png 500w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-600-977c5f664.png 600w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-700-977c5f664.png 700w, https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-800-977c5f664.png 800w" type="image/png"> <img class="img-thumb lazyload" src="https://haade.fr/assets/images/generated/posts/132/monter-nas-pas-cher-et-performant-proxmox-sans-disque-dur-800-977c5f664.png" alt="High-performance and inexpensive multi-service NAS and Proxmox" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/en/blog/manufacture-a-high-performance-and-cheap-nas-amazon-renewed-and-proxmox-omv-truenas-home-assistant">High-performance and inexpensive multi-service NAS and Proxmox</a></h2><p class="card-text">You will find on the internet several ways of performing NAS based on mini-PCs but for a performance equivalent to the Intel i5 or i7 the prices can quickly skyrocket....</p></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/en/author-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date"> 3<sup>rd</sup>July 2024</span> </span><div class="clearfix"></div></div></div></div></div></div></div></div></div><footer><div class="footcontent"><div class="footleft footbox"><div class="footupper"><div class="foottopic">About</div><p>Haade is a blog intended to help individuals and professionals to set up a home automation system</p></div><div class="footlower"><div class="foottopic">Contact-us</div><div class="phone"> <a href="#"><i class="icos phone-volume-solid"></i>+0033 6 99 40 15 86</a></div><div class="email"> <a href="/en/contact"><i class="icos envelope-solid"></i>Confact form</a></div></div></div><div class="footmiddle footbox"><div class="foottopic">Useful links</div><div><a href="/en/gdpr">Privacy Policy</a></div><div><a href="/en/legal-notice">Legal notice</a></div><div><a target="_blank" href="https://buildwithmatter.com/">Protocole Matter</a></div><div><a target="_blank" href="https://zigbeealliance.org/fr/%C3%A9v%C3%A9nements/">Zigbee Alliance</a></div><div><a target="_blank" href="https://z-wavealliance.org/category/z-wave-in-the-news/">Z-wave Alliance</a></div><div><a target="_blank" href="https://www.aqara.com/eu/news.html">Aquara by Xiaomi</a></div><div><a target="_blank" href="https://itead.cc/">Itead Sonoff, Nextion</a></div></div><div class="footright footbox"><div class="foottopic">Subscribe to the newsletter</div><form action="https://haade.us4.list-manage.com/subscribe/post?u=86f32891957737a57c0b4ade8&amp;id=92dadba2b4&amp;f_id=00639cebf0" method="post" name="embedded-mail" target="_blank"> <input type="email" placeholder="Enter email address" name="EMAIL"> <input type="submit" name="Subscription" value="Send" id="submit"> </form> <a href="https://github.com/haade-administrator/haade.fr/discussions" target="_blank" alt="github discussion link" aria-label="Continue the discussion on the github forum"><i class="icob github" aria-hidden="true" title="github discussion"></i></a> <a target="_blank" href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w/?sub_confirmation=1" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Subscribe to our youtube channel"><i class="icob youtube" aria-hidden="true" title="youtube"></i></a> <a target="_blank" href="https://discord.gg/FaK6MuZ2" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Invitation to our Discord network"><i class="icob discord" aria-hidden="true" title="discord"></i></a> <a href="/en/feed.xml" target="_blank" alt="feed rss" aria-label="share the rss feed with your friends"><i class="icob rss" aria-hidden="true" title="feed rss haade"></i></a></div></div></div><div class="footbottom"><p>Copyright Â© 2024 <a target="_blank" href="https://www.haade.fr">Haade</a> ðŸŽ‰ by Nicoxygen</p></div></footer></div><script src="/assets/js/main.min.js?v=ace684cfe98fc0b9d684c87b0573a5f2" type="text/javascript"></script> <script src="/assets/js/lunrsearchengine-en.js?v=6debdc48922f8918a8d9a7cf53f61883"></script>

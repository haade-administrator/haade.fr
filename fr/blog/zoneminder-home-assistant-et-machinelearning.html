<!DOCTYPE html><html lang="fr-FR"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="icon" href="/assets/images/logo.png"><title>Zoneminder, home assistant et Machinelearning - Haade.fr</title><meta name="description" content="Intégration du système de gestion de caméra Zoneminder dans homeassistant avece activation du machinelearning"><link rel="canonical" href="https://haade.fr/fr/blog/zoneminder-home-assistant-et-machinelearning"><link rel="alternate" hreflang="en" href="https://haade.fr/en/blog/zoneminder-home-assistant-and-machinelearning"/><link rel="alternate" hreflang="fr" href="https://haade.fr/fr/blog/zoneminder-home-assistant-et-machinelearning"/><meta property="og:locale" content="fr-FR"><meta property="og:type" content="article"><meta property="og:title" content="Zoneminder, home assistant et Machinelearning"><meta property="og:description" content="Intégration du système de gestion de caméra Zoneminder dans homeassistant avece activation du machinelearning"><meta property="og:url" content="https://haade.fr/fr/blog/zoneminder-home-assistant-et-machinelearning"><meta property="og:site_name" content="Haade.fr"><meta property="og:image" content="https://haade.fr/zoneminder_homeassistant-1.png"><meta property="article:author" content=""><meta property="article:published_time" content="2021-09-25T00:00:00+02:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "BlogPosting", "url": "https://haade.fr/fr/blog/zoneminder-home-assistant-et-machinelearning", "name": "Zoneminder, home assistant et Machinelearning", "headline": "Zoneminder, home assistant et Machinelearning", "keywords": "Tutoriel,Zoneminder,Homeassistant", "description": "Intégration du système de gestion de caméra Zoneminder dans homeassistant avece activation du machinelearning", "articleBody": "Dlandon a sorti cette année une image Docker complète avec Zoneminder et le Machinelearning, l’intégration dans home assistant est complète. C’est pourqoui cet article devait absolument voir le jour. Depuis moins d’un an l’installation sous docker a été largement simplifié. De plus le machinelearning est très complet grâce à la détection d’objets, détection faciale, reconnaissance faciale, reconnaissance de plaques, etc… .\n\nPrérequis:\n\n\n Home assistant core ou HAOS d’installé et fonctionnel\n Ordinateur traditionnel avec DD ou de type NAS\n Docker installé et fonctionnel sur l’ordinateur\n Savoir utiliser l’environnement docker pour installer et configurer Zoneminder\n\n\nL’environnement d’installation:\n\nZoneminder va être installé sur un NAS qui tourne sous Openmediavault avec docker. Ce choix est presque indispensable, d’une part le processeur CPU/GPU est relativement puissant, de plus le stockage des vidéos peut devenir très envahissant. Je déconseille l’installation de Zoneminder sur un Raspberry pi, pas assez puissant pour zm et le Machinelearning actif.\n\nquand à home assistant OS, il est installé sur un Raspberry pi depuis peut, avant j’utilisais home-assistant core qui tournait dans un container sur le NAS.\n\nci-dessous on retrouve la commande docker que l’on retrouve dans la documentation du dépôt github.\n\ndocker run -d --name=&quot;Zoneminder&quot; \\\n--net=&quot;bridge&quot; \\\n--privileged=&quot;false&quot; \\\n--shm-size=&quot;8G&quot; \\\n-p 8443:443/tcp \\\n-p 9000:9000/tcp \\\n-e TZ=&quot;America/New_York&quot; \\\n-e PUID=&quot;99&quot; \\\n-e PGID=&quot;100&quot; \\\n-e MULTI_PORT_START=&quot;0&quot; \\\n-e MULTI_PORT_END=&quot;0&quot; \\\n-v &quot;/mnt/Zoneminder&quot;:&quot;/config&quot;:rw \\\n-v &quot;/mnt/Zoneminder/data&quot;:&quot;/var/cache/zoneminder&quot;:rw \\\ndlandon/zoneminder.machine.learning\n\nExemple de configurations personnalisés “celle que j’utilise” pour Openmediavault, il faut penser à personnaliser le timezone TZ ainsi que tout volume de montage. Tu peux installer ZM non sécurisé avec le port -p 8080:80, cependant je conseil vivement de faire l’installation en ssl, letsencrypt fait partie du container. Un plus !\n\ndocker run -d --name=&quot;Zoneminder&quot; \\\n--net=&quot;bridge&quot; \\\n--privileged=&quot;false&quot; \\\n--shm-size=&quot;8G&quot; \\\n-p 8443:443/tcp \\\n-p 9000:9000/tcp \\\n-e TZ=&quot;Europe/Paris&quot; \\\n-e PUID=&quot;1000&quot; \\\n-e PGID=&quot;100&quot; \\\n-e MULTI_PORT_START=&quot;0&quot; \\\n-e MULTI_PORT_END=&quot;0&quot; \\\n-v &quot;/sharedfolder/Appdata/Zoneminder&quot;:&quot;/config&quot;:rw \\\n-v &quot;/sharedfolder/Télésurveillance/Zoneminder&quot;:&quot;/var/cache/zoneminder&quot;:rw \\\ndlandon/zoneminder.machine.learning\n\nAprès lancement de l’image l’installation se fait rapidement grâce au travail de dlandon sur l’image. Auparavant avec l’ancienne image de Zoneminder il fallait patienter 20 à 40 minutes, la partie ES et ML prenait pas mal de temps. Maintenant Zoneminder et Le paquet ZMEventnotification s’installent en moins de 5 minutes.\n\nPS: Si tu veux utiliser une installation sous docker-compose tu trouvera le code ici.\n\n1 - Préparation de Zoneminder pour Home assistant et Machinelearning ML\n\nProtection par mot de passe de Zoneminder\n\nModifier l’utilisateur par défaut Admin dan options »&gt; utilisateurs et paramétrez un mot de passe\n\nEnsuite dans Options »&gt; Systèmes\n\nCochez les cases comme l’image ci-dessous et rentrez un code Hashsecret pour plus de sécurité\n\n\n OPT-USE_AUTH: authentification par mot de passe\n AUTH_HASH_SECRET: Code supplémentaire ( tu peux générer un code ici )\n AUTH_HASH_LOGINS: prendre en compte la double sécurisation\n OPT_USE_API: Activer l’API Zoneminder\n OPT_USE_LEGACI_API_AUTH: activer l’uthentification API\n OPT_USE_EVENTNOTIFICATION: Prise en compte du machine learning\n\n\n\n\nMise en place pour Home Assistant\n\nEnsuite il faut créer un utilisateur dédié à Homeassistant avec une ouverture aux API Zoneminder:\n\nOptions »&gt; Utilisateurs » Ajouter utilisateurs\n\n\n\n2 - Paramétrage du Machinelearning ( ZMEVENTNOTIFICATION )\n\nPour commencer l’intégralité de la documentation est disponible à cette adresse https://zmeventnotification.readthedocs.io/\n\nPour le machinelearning nous avons 3 fichiers à personnaliser pour ces 3 fichiers il existe d’ailleurs un doublon en exemple. Donc il s’agit des fichiers secret.ini qui contien tous les mots de passes et objectconfig.ini contient chaque paramétrage pour chaque caméra en gros on indique ce que l’on veut que Zmeventnotification analyse en fonction de chaque caméra.\n\nsecrets.ini doit ressembler à ça ( dans ma config je n’utilise pas l’api ML, OpenAlpr, Escontrol, Mqtt et Pushover )\n\n# your secrets file\n[secrets]\n\n# fid can have the following values:\n# a particular &lt;frameid&gt;, alarm or snapshot\n# starting ZM 1.35, you can also specify\n# objdetect_mp4, objdetect_gif or objdetect_image\n# this needs create_animation enabled in objectconfig.ini and associated flags\nZMES_PICTURE_URL=https://example.com/zm/index.php?view=image&amp;eid=EVENTID&amp;fid=objdetect&amp;width=600 # À PERSONNALISER\n\nZM_USER=haos # À PERSONNALISER\nZM_PASSWORD=JaImEin3t3rdesMoTs # À PERSONNALISER\nES_ADMIN_INTERFACE_PASSWORD=i3i3gr0tUiY # À PERSONNALISER\n\nZM_PORTAL=https://example.com/zm # À PERSONNALISER\nZM_API_PORTAL=https://example.com/zm/api # À PERSONNALISER\n\nES_CERT_FILE = /etc/apache2/ssl/zoneminder.crt\nES_KEY_FILE = /etc/apache2/ssl/zoneminder.key\n\nML_USER=your_mlapi_user\nML_PASSWORD=your_mlapi_password\nPLATEREC_ALPR_KEY=your_platerec_api_key # celui que j&#39;utilise\nOPENALPR_ALPR_KEY=your_openalpr_api_key\n\nESCONTROL_INTERFACE_PASSWORD=yourescontrolpassword\n\nMQTT_USERNAME=your_mqtt_username\nMQTT_PASSWORD=your_mqtt_password\n\nPUSHOVER_APP_TOKEN=your_pushover_app_token\nPUSHOVER_USER_KEY=your_pushover_user_key\n\nAu tour de objectconfig.ini qui doit ressembler au code ci-dessous. Avec la nouvelle version de ZMeventnotification, le paramétrage des moniteurs à été très simplifié\n\nClic ici si tu veux lire la doc officielle.\n\nPour ces paramétrages n’hésitez pas à m’écrire mais dans premier lieu il s’agit de modifier les [monitor-x] en effet on ne met pas le nom de sa caméra mais si celle-ci est en première position on l’appellera monitor-1 et ainsi de suite, ci-dessous un exemple de monitoring de garage.\n\n[monitor-1]\n# mon garage\nmodel_sequence=alpr,object\nobject_detection_pattern=(person|car|motorbike)\n\n[monitor-2]\n#doorbell\nmodel_sequence=face,object\nobject_detection_pattern=(person)\n\n[ml]\nuse_sequence= yes # Important pour la prise en charge du nouveau système\n\nafin de pouvoir utiliser la capture d’images par personne il faut crée un dossier s’il n’existe pas dans … nommé known_faces et intégrer à l’intérieur un sous dossier nommé nicolas ensuite intégrer des photos de vous qui serons nommé 1.png, 2.png, etc. lien direct de l’architecture zmeventnotification known-faces\n\nUne fois toutes les images insérées ou dès que tu ajoutes une nouvelle image, il faudra générer le train_face, donc rentrons dans le docker zoneminder:\n\ndocker exec -it zoneminder /bin/bash\n\nUne fois toutes les images intégrées dans le dossier ou en cas de rajout d’images lance la commande suivante afin de générer le trainface:\n\nsudo -u www-data /var/lib/zmeventnotification/bin/zm_train_faces.py\n\nredémarre les service\n\nsudo service zoneminder restart\n\net voilà si tout s’est bien passé Zmeventnotification devrait être fonctionnel.\n\n3 - Intégration de Zoneminder dans Home Assistant\n\nles lignes de codes ci-dessous sont à rentrer dans la configuration.yaml de home-assistant pour connaître tous les paramètres consulte cette page officielle: Intégration Zoneminder et Homeassistant.\n\n\n\ninterface complète de zoneminder dans home assistant\n\nEn plus de cette intégration dans home-assistant Zoneminder permet de faire remonter un service appelé zoneminder.set_run_state. Permet de Changer l’état de Zoneminder.\n\nQu’est-ce qu’un état dans Zoneminder:\n\nUn état dans Zoneminder permet de gérer les Modes des caméras comme bon nous semble juste en basculant sur cet état.\n\nPar défaut il existe 3 états dans Zm:\n\n\n Arrêté: il désactive toutes les caméras\n Redémarré: il redémarre les caméras\n Défaut, EN MARCHE: réglage par défaut\n\n\nPour Home Assistant j’ai créé deux nouveaux états, HOME c’est un état quand je suis au domicile, et AWAY quand je suis absent, ces états sont utilisés dans le cadre d’une automatisation par gestion d’alarme.\n\n\n HOME: quand je suis à la maison les caméras intérieurs sont en mode Monitor et les extérieurs en Modect\n AWAY: quand je suis absent elles passent toutes en Modect.\n\n\nIMPORTANT ! les modes des caméras sont à paramétrer avant l’enregistrement d’un nouvel état voir le Gif ci-dessous.\n\nAVANTAGE: Par rapport au binary-sensor Zm qui permet de passer d’un mode à l’autre dans HA, le changement d’état est très pratique lorsque l’on veut choisir un autre mode, lorsqu’on à pleins de caméra et surtout simplifie les automatisations dans HA appel à un service sans avoir besoin de faire appel à chaque caméra ou de créer un groupe binary_sensor Home ou Away dans group.yaml de HA.\n\n\n\n4 - Fonctionnement des Modes dans Zoneminder:\n\n\n Aucun: Moniteur désactivé. Aucun flux visualisé ni aucun événement généré.\n Nodect: Il s’agit d’un mode spécial conçu pour travailler avec des déclencheurs externes. Dans Nodect, aucune détection de mouvement n’a lieu mais les événements sont enregistrés sur déclencheurs externes\n Monitor: Le moniteur n’est disponible que pour la diffusion en direct. Sans analyse d’images ou évènements.\n Mocord: Le moniteur enregistre en continu, tout mouvement étant mis en évidence dans ces événements.\n Modect: Le moniteur analyse les images et génère des événements. La vidéo enregistre sur mouvement durant un temps déterminé.\n Record: Le moniteur enregistre en continu. Des événements d’une durée fixe se génèrent quel que soit le mouvement, de la même manière qu’un enregistrement vidéo à intervalle de temps conventionnel. Aucune détection de mouvement n’a lieu dans ce mode.\n\n\nFonctionnement des Zones dans Zoneminder\n\nUn article est dédié aux zones et préréglages, clic ici !\n\nFonctionnement de Filtres dans Zoneminder\n\nUn article est dédié aux filtres, clic ici !\n\nEn Conclusion\n\nPour finir Zoneminder n’a peut être pas l’interface la plus belle mais par sa gratuité et la stabilité il est certainement le meilleur outil de gestion de caméra du moment. Une fois que l’on maîtrise bien les différents aspects, il devient alors pratique intuitif et indispensable du point de vue sécurité, l’intégration dans Home assistant est un plus non négligeable.\n", "datePublished": "2021-09-25 00:00:00 +0200", "dateModified": "2021-09-25 00:00:00 +0200", "inLanguage": "fr-FR", "author": { "@type": "Person", "name": null, "alternateName": null, "description": null, "url": null,"image": null,"email": null }, "publisher": { "@type": "Organization", "name": "Haade.fr", "url": "https://haade.fr", "logo": { "@type": "ImageObject", "width": 250, "height": 63, "url": "https://haade.fr/assets/images/logo.png" } }, "mainEntityOfPage": { "@type": "WebPage", "@id": "https://haade.fr/fr/blog/zoneminder-home-assistant-et-machinelearning" }, "image": { "@type": "ImageObject", "width": 250, "height": 94, "url": "https://haade.fr/zoneminder_homeassistant-1.png" } } </script><link href="/assets/css/theme.css?v=1748488605261806118" media="screen, projection, print" rel="stylesheet"> <script data-goatcounter="https://haade.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><link rel="preload" href="/assets/fonts/montserrat/Montserrat-VariableFont_wght.woff2" as="font" crossorigin><link rel="preload" href="/assets/fonts/icomoon/icomoon.woff2?4fpajq" as="font" crossorigin><link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico" ><link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png" ><header><div class="firstnavbar"><div class="links"> <a href="/">Accueil</a> <a href="/fr/rgpd-politique-de-confidentialite/">RGPD</a> <a href="/fr/contact/">Contact</a><div class="sl-nav"> langue:<ul><li><b>Francais</b> <i class="ico angle-down-solid triangle-arrow trrow" aria-hidden="true"></i><div class="triangle"></div><ul class="show-flags"><li class="current"><a href="/fr/blog/zoneminder-home-assistant-et-machinelearning"><i class="sl-flag fix flag-fr"><div id="Francais"></div></i><span class="active">Francais</span></a><li><a href="/en/blog/zoneminder-home-assistant-and-machinelearning"><i class="sl-flag fix flag-england"><div id="English"></div></i><span class="active">English</span></a></ul></ul></div></div><div class="social-firstnav"> <a href="https://github.com/haade-administrator/haade.fr/discussions" target="_blank" alt="github discussion link" aria-label="Continue la discussion sur le forum github"><i class="icob github" width="1em" height="1em" aria-hidden="true" title="github discussion"></i></a> <a href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w/?sub_confirmation=1" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Abonne toi à notre chaine youtube"><i class="icob youtube" width="1em" height="1em" target="_blank" alt="youtube" aria-hidden="true" title="youtube"></i></a> <a href="https://discord.gg/FaK6MuZ2" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Invitation sur notre réseau Discord"><i class="icob discord" width="1em" height="1em" target="_blank" alt="discord" aria-hidden="true" title="discord"></i></a> <a href="/fr/feed.xml" target="_blank" alt="feed rss" aria-label="partage le flux rss avec tes amis"><i class="icob rss" width="1em" height="1em" aria-hidden="true" title="feed rss haade"></i></a></div></div><div class="secondheader"> <a class="navbar-brand" href="/"><picture> <source sizes="(max-width: 524px) 150px, 250px" srcset="https://haade.fr/assets/images/generated/logo-150-379587352.webp 150w, https://haade.fr/assets/images/generated/logo-250-379587352.webp 250w" type="image/webp"> <source sizes="(max-width: 524px) 150px, 250px" srcset="https://haade.fr/assets/images/generated/logo-150-64f85a78e.png 150w, https://haade.fr/assets/images/generated/logo-250-64f85a78e.png 250w" type="image/png"> <img id="logoIImage" src="https://haade.fr/assets/images/generated/logo-250-64f85a78e.png" alt="Logo officiel du site domotique Haade" width="250" height="94"> </picture> </a><p class="sitetag"> Home Assistance Alsace domotique & électronique.</p></div><nav id="nav"><div class="navbar"> <i class='icos bars-solid'></i><div class="nav-links"><div class="sidebar-logo"> <span class="logo-name">H2Ade</span> <i class='icos times-solid'></i></div><ul class="links"><li><a href="/">Accueil<span class="badge badge-light tags">160</span></a><li> <a href="https://haade.fr/fr/categorie/domotique">Domotique</a> <i class="icos angle-down-solid htmlcss-arrow-automation arrow"></i><ul class="htmlCss-sub-menu-automation sub-menu"><li><a href="/fr/categorie/securite">Sécurité</a><li class="more"> <span><a href="/fr/categorie/haade-lab">Tutos</a> <i class='icos angle-right-solid arrow more-arrow-automation'></i> </span><ul class="more-sub-menu-automation sub-menu"><li><a href="/fr/categorie/mini-tutos">Mini-tutos</a><li><a href="/fr/categorie/videos">Vidéos</a><li><a href="/fr/categorie/home-assistant">Home-Assistant</a><li><a href="/fr/categorie/jeedom">Jeedom</a></ul></ul><li><a href="/fr/categorie/news">News</a><li><a href="/fr/categorie/tests">Tests</a><li><a href="/fr/auteurs">Contributeurs<span class="badge badge-primary">News</span></a><li><a target="_blank" href="https://github.com/haade-administrator/haade.fr/discussions">Forum</a><li><a href="/fr/categorie-produit/boutique">Boutique</a> <i class="icos angle-down-solid htmlcss-arrow-shop arrow"></i><ul class="htmlCss-sub-menu-shop sub-menu"><li class="more"> <span><a href="#">Marque</a> <i class='icos angle-right-solid arrow more-arrow-brand'></i> </span><ul class="more-sub-menu-brand sub-menu"><li><a href="/fr/categorie-produit/jeedom">Jeedom</a><li><a href="/fr/categorie-produit/moes">Moes</a><li><a href="/fr/categorie-produit/neo-coolcam">Neo-Coolcam</a><li><a href="/fr/categorie-produit/nodon">Nodon</a><li><a href="/fr/categorie-produit/raspberry-pi">Raspberry Pi</a><li><a href="/fr/categorie-produit/shelly">Shelly</a><li><a href="/fr/categorie-produit/sonoff">Sonoff</a><li><a href="/fr/categorie-produit/tedee">Tedee</a><li><a href="/fr/categorie-produit/xiaomi">Xiaomi</a><li><a href="/fr/categorie-produit/zemismart">Zemismart</a><li><a href="/fr/categorie-produit/zooz">Zooz</a></ul><li class="more"> <span><a href="#">Protocole</a> <i class='ico angle-right-solid arrow more-arrow-protocol'></i> </span><ul class="more-sub-menu-protocol sub-menu"><li><a href="/fr/categorie-produit/bluetooth">Bluetooth</a><li><a href="/fr/categorie-produit/esp">Esp 32/8266</a><li><a href="/fr/categorie-produit/matter">Matter</a><li><a href="/fr/categorie-produit/wifi">Wifi</a><li><a href="/fr/categorie-produit/zigbee">Zigbee</a><li><a href="/fr/categorie-produit/zwave">Z-wave</a></ul></ul><li><div class="sl-nav"> langue:<ul><li><b>Francais</b> <i class="ico angle-down-solid triangle-arrow trrow" aria-hidden="true"></i><div class="triangle"></div><ul class="show-flags"><li class="current"><a href="/fr/blog/zoneminder-home-assistant-et-machinelearning"><i class="sl-flag fix flag-fr"><div id="Francais"></div></i><span class="active">Francais</span></a><li><a href="/en/blog/zoneminder-home-assistant-and-machinelearning"><i class="sl-flag fix flag-england"><div id="English"></div></i><span class="active">English</span></a></ul></ul></div></ul></div><script src="/assets/js/lunr.min.js?v=a944ea77ca394dff9a667d5aea56f0e9" type="text/javascript"></script><div class="search-box"> <i class='icos search-solid'></i><div class="input-box"> <form onSubmit="return lunr_search(document.getElementById('lunrsearch').value);" class="search-form" role="search"> <input autocomplete="on" id="lunrsearch" class="search-input" name="q" maxlength="200" placeholder="Recherche..." type="search" value=""> <input class="search-action" type="submit" value="Ok"> </form></div><div id="lunrsearchresults"><ul></ul></div></div></div></nav></header><div class="site-content"><div class="container"><div class="main-content"> <script> var addViews = "1246"; var addViewsValue = parseInt(addViews); var r = new XMLHttpRequest(); r.addEventListener('load', function() { var visits = parseInt(JSON.parse(this.responseText).count.replace(/\s/g, '')); var totalVisits = visits; if (!isNaN(addViewsValue)) { totalVisits += addViewsValue; } document.getElementById('visits').innerText = totalVisits; }); r.open('GET', 'https://haade.goatcounter.com/counter/' + encodeURIComponent(location.pathname) + '.json'); r.send(); </script><div class="entry-header"><nav class="ariane"><ol class="arianefil" itemscope itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a itemprop="item" href="https://haade.fr/"><span itemprop="name">Accueil</span></a><meta itemprop="position" content="1"><li><span class="prompt">&nbsp; > &nbsp;</span><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="https://haade.fr/fr/categorie/domotique"><span itemprop="name">Domotique</span></a><meta itemprop="position" content="2"><li><span class="prompt">&nbsp; > &nbsp;</span>Zoneminder, home assistant et Machinelearning</ol></nav><h1 class="posttitle">Zoneminder, home assistant et Machinelearning</h1><div class="d-flex align-items-start mt-4"><div class="authorpost"> <a href="/fr/auteur-nico"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-60-5d88b8595.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-60-c8508425c.png 1.0x" type="image/png"> <img class="author-thumb" itemprop="image" width="60" height="60" src="https://haade.fr/assets/images/generated/nico-60-c8508425c.png" alt="Nico"> </picture> </a> Écris par <a href="/fr/auteur-nico"><b>Nico</b></a></div><div class="readingpost">&nbsp;<i class="icos calendar-check" width="1em" height="1em"></i> <span class="post-date"><time class="post-date" datetime="25-09-2021">25 septembre 2021 &nbsp; </time></span> <span><span class="reading-time" title="Temps de Lecture estimé"> <i class="icos history" width="1em" height="1em"></i> <strong> 8 min</strong> de lecture </span> </span><p><i class="icos eye-solid" width="1em" height="1em"></i> Cet Article a été vu <span id="visits" style="font-weight:bold">...</span> fois</p></div></div></div><div class="entry-featured-image"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) 800px, (min-width: 1025px) 940px, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-300-d013a1705.webp 300w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-400-d013a1705.webp 400w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-500-d013a1705.webp 500w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-600-d013a1705.webp 600w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-700-d013a1705.webp 700w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-800-d013a1705.webp 800w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-900-d013a1705.webp 900w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-940-d013a1705.webp 940w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) 800px, (min-width: 1025px) 940px, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-300-d013a1705.png 300w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-400-d013a1705.png 400w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-500-d013a1705.png 500w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-600-d013a1705.png 600w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-700-d013a1705.png 700w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-800-d013a1705.png 800w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-900-d013a1705.png 900w, https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-940-d013a1705.png 940w" type="image/png"> <img class="lazyload featured-image-post" width="940" height="529" itemprop="image" src="https://haade.fr/assets/images/generated/posts/21/zoneminder_homeassistant-1-940-d013a1705.png" alt="Zoneminder, home assistant et Machinelearning"> </picture></div><div class="article-post"><div class="toc mt-4 mb-4 lead"><h3 class="font-weight-bold">Sommaire</h3><ul class="table_of"><li class="toc"><a href="#prérequis" class="toc_anchor">Prérequis:</a><li class="toc"><a href="#lenvironnement-dinstallation" class="toc_anchor">L’environnement d’installation:</a><ul class="toc_sub"><li class="toc"><a href="#1---préparation-de-zoneminder-pour-home-assistant-et-machinelearning-ml" class="toc_anchor">1 - Préparation de Zoneminder pour Home assistant et Machinelearning ML</a><li class="toc"><a href="#2---paramétrage-du-machinelearning--zmeventnotification-" class="toc_anchor">2 - Paramétrage du Machinelearning ( ZMEVENTNOTIFICATION )</a><li class="toc"><a href="#3---intégration-de-zoneminder-dans-home-assistant" class="toc_anchor">3 - Intégration de Zoneminder dans Home Assistant</a></ul><li class="toc"><a href="#quest-ce-quun-état-dans-zoneminder" class="toc_anchor">Qu’est-ce qu’un état dans Zoneminder:</a><ul class="toc_sub"><li class="toc"><a href="#4---fonctionnement-des-modes-dans-zoneminder" class="toc_anchor">4 - Fonctionnement des Modes dans Zoneminder:</a></ul><li class="toc"><a href="#fonctionnement-des-zones-dans-zoneminder" class="toc_anchor">Fonctionnement des Zones dans Zoneminder</a><li class="toc"><a href="#fonctionnement-de-filtres-dans-zoneminder" class="toc_anchor">Fonctionnement de Filtres dans Zoneminder</a><li class="toc"><a href="#en-conclusion" class="toc_anchor">En Conclusion</a></ul></div><div class="content-post"><p><a href="https://hub.docker.com/r/dlandon/zoneminder.machine.learning" target="_blank">Dlandon</a> a sorti cette année une image Docker complète avec Zoneminder et le Machinelearning, l’intégration dans home assistant est complète. C’est pourqoui cet article devait absolument voir le jour. Depuis moins d’un an l’installation sous docker a été largement simplifié. De plus le <strong>machinelearning est très complet</strong> grâce à la détection d’objets, détection faciale, reconnaissance faciale, reconnaissance de plaques, etc… .</p><h2 id="prérequis">Prérequis:</h2><ul><li>Home assistant core ou HAOS d’installé et fonctionnel<li>Ordinateur traditionnel avec DD ou de type NAS<li>Docker installé et fonctionnel sur l’ordinateur<li>Savoir utiliser l’environnement docker pour installer et configurer Zoneminder</ul><h2 id="lenvironnement-dinstallation">L’environnement d’installation:</h2><p>Zoneminder va être installé sur un NAS qui tourne sous Openmediavault avec docker. Ce choix est presque indispensable, d’une part le processeur CPU/GPU est relativement puissant, de plus le stockage des vidéos peut devenir très envahissant. Je déconseille l’installation de Zoneminder sur un Raspberry pi, pas assez puissant pour zm et le Machinelearning actif.</p><p>quand à home assistant OS, il est installé sur un Raspberry pi depuis peut, avant j’utilisais home-assistant core qui tournait dans un container sur le NAS.</p><p>ci-dessous on retrouve la <a href="https://github.com/dlandon/zoneminder.machine.learning" target="_blank">commande docker que l’on retrouve dans la documentation du dépôt github</a>.</p><figure class="highlight"><pre><code class="language-docker" data-lang="docker">docker run -d --name=&quot;Zoneminder&quot; \
--net=&quot;bridge&quot; \
--privileged=&quot;false&quot; \
--shm-size=&quot;8G&quot; \
-p 8443:443/tcp \
-p 9000:9000/tcp \
-e TZ=&quot;America/New_York&quot; \
-e PUID=&quot;99&quot; \
-e PGID=&quot;100&quot; \
-e MULTI_PORT_START=&quot;0&quot; \
-e MULTI_PORT_END=&quot;0&quot; \
-v &quot;/mnt/Zoneminder&quot;:&quot;/config&quot;:rw \
-v &quot;/mnt/Zoneminder/data&quot;:&quot;/var/cache/zoneminder&quot;:rw \
dlandon/zoneminder.machine.learning</code></pre></figure><p>Exemple de configurations personnalisés “celle que j’utilise” pour Openmediavault, il faut penser à personnaliser le timezone TZ ainsi que tout volume de montage. Tu peux installer ZM non sécurisé avec le port <strong>-p 8080:80</strong>, cependant je conseil vivement de faire l’installation en ssl, letsencrypt fait partie du container. Un plus !</p><figure class="highlight"><pre><code class="language-docker" data-lang="docker">docker run -d --name=&quot;Zoneminder&quot; \
--net=&quot;bridge&quot; \
--privileged=&quot;false&quot; \
--shm-size=&quot;8G&quot; \
-p 8443:443/tcp \
-p 9000:9000/tcp \
-e TZ=&quot;Europe/Paris&quot; \
-e PUID=&quot;1000&quot; \
-e PGID=&quot;100&quot; \
-e MULTI_PORT_START=&quot;0&quot; \
-e MULTI_PORT_END=&quot;0&quot; \
-v &quot;/sharedfolder/Appdata/Zoneminder&quot;:&quot;/config&quot;:rw \
-v &quot;/sharedfolder/Télésurveillance/Zoneminder&quot;:&quot;/var/cache/zoneminder&quot;:rw \
dlandon/zoneminder.machine.learning</code></pre></figure><p>Après lancement de l’image l’installation se fait rapidement grâce au travail de dlandon sur l’image. Auparavant avec l’ancienne image de Zoneminder il fallait patienter 20 à 40 minutes, la partie ES et ML prenait pas mal de temps. <strong>Maintenant Zoneminder et Le paquet ZMEventnotification</strong> s’installent <strong>en moins de 5 minutes</strong>.</p><p>PS: Si tu veux utiliser une <a href="https://github.com/dlandon/zoneminder.machine.learning/blob/master/docker-compose.yaml" target="_blank">installation sous docker-compose tu trouvera le code ici.</a></p><h3 id="1---préparation-de-zoneminder-pour-home-assistant-et-machinelearning-ml">1 - Préparation de Zoneminder pour Home assistant et Machinelearning ML</h3><p><strong>Protection par mot de passe de Zoneminder</strong></p><p>Modifier l’utilisateur par défaut <strong>Admin</strong> dan options »&gt; utilisateurs et paramétrez un mot de passe</p><p>Ensuite dans Options »&gt; Systèmes</p><p>Cochez les cases comme l’image ci-dessous et rentrez un code Hashsecret pour plus de sécurité</p><ol><li>OPT-USE_AUTH: authentification par mot de passe<li>AUTH_HASH_SECRET: Code supplémentaire ( <a href="https://www.md5hashgenerator.com/" target="_blank">tu peux générer un code ici</a> )<li>AUTH_HASH_LOGINS: prendre en compte la double sécurisation<li>OPT_USE_API: Activer l’API Zoneminder<li>OPT_USE_LEGACI_API_AUTH: activer l’uthentification API<li>OPT_USE_EVENTNOTIFICATION: Prise en compte du machine learning</ol><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-240-abd969c2b.webp 240w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-300-abd969c2b.webp 300w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-400-abd969c2b.webp 400w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-480-abd969c2b.webp 480w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-698-abd969c2b.webp 698w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-820-abd969c2b.webp 820w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-240-abd969c2b.png 240w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-300-abd969c2b.png 300w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-400-abd969c2b.png 400w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-480-abd969c2b.png 480w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-698-abd969c2b.png 698w, https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-820-abd969c2b.png 820w" type="image/png" /><img class="pictinpost lazyload" width="820" height="738" src="https://haade.fr/assets/images/generated/posts/21/capture-options-systemes-zoneminder-240-abd969c2b.png" alt="paramétrage option zoneminder" /></picture><p><strong>Mise en place pour Home Assistant</strong></p><p>Ensuite il faut créer un utilisateur dédié à Homeassistant avec une ouverture aux API Zoneminder:</p><p>Options »&gt; Utilisateurs » Ajouter utilisateurs</p><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-240-ea88f06de.webp 240w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-300-ea88f06de.webp 300w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-400-ea88f06de.webp 400w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-480-ea88f06de.webp 480w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-698-ea88f06de.webp 698w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-820-ea88f06de.webp 820w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-240-ea88f06de.png 240w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-300-ea88f06de.png 300w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-400-ea88f06de.png 400w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-480-ea88f06de.png 480w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-698-ea88f06de.png 698w, https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-820-ea88f06de.png 820w" type="image/png" /><img class="pictinpost lazyload" width="820" height="694" src="https://haade.fr/assets/images/generated/posts/21/capture-utilisateur-zoneminder-240-ea88f06de.png" alt="paramétrage utilisateur zoneminder" /></picture><h3 id="2---paramétrage-du-machinelearning--zmeventnotification-">2 - Paramétrage du Machinelearning ( ZMEVENTNOTIFICATION )</h3><p>Pour commencer l’intégralité de la documentation est disponible à cette adresse <a href="https://zmeventnotification.readthedocs.io/" target="_blank">https://zmeventnotification.readthedocs.io/</a></p><p>Pour le machinelearning nous avons 3 fichiers à personnaliser pour ces 3 fichiers il existe d’ailleurs un doublon en exemple. Donc il s’agit des fichiers secret.ini qui contien tous les mots de passes et objectconfig.ini contient chaque paramétrage pour chaque caméra en gros on indique ce que l’on veut que Zmeventnotification analyse en fonction de chaque caméra.</p><p>secrets.ini doit ressembler à ça ( <strong>dans ma config je n’utilise pas</strong> l’api ML, OpenAlpr, Escontrol, Mqtt et Pushover )</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell"># your secrets file
[secrets]

# fid can have the following values:
# a particular &lt;frameid&gt;, alarm or snapshot
# starting ZM 1.35, you can also specify
# objdetect_mp4, objdetect_gif or objdetect_image
# this needs create_animation enabled in objectconfig.ini and associated flags
ZMES_PICTURE_URL=https://example.com/zm/index.php?view=image&amp;eid=EVENTID&amp;fid=objdetect&amp;width=600 # À PERSONNALISER

ZM_USER=haos # À PERSONNALISER
ZM_PASSWORD=JaImEin3t3rdesMoTs # À PERSONNALISER
ES_ADMIN_INTERFACE_PASSWORD=i3i3gr0tUiY # À PERSONNALISER

ZM_PORTAL=https://example.com/zm # À PERSONNALISER
ZM_API_PORTAL=https://example.com/zm/api # À PERSONNALISER

ES_CERT_FILE = /etc/apache2/ssl/zoneminder.crt
ES_KEY_FILE = /etc/apache2/ssl/zoneminder.key

ML_USER=your_mlapi_user
ML_PASSWORD=your_mlapi_password
PLATEREC_ALPR_KEY=your_platerec_api_key # celui que j&#39;utilise
OPENALPR_ALPR_KEY=your_openalpr_api_key

ESCONTROL_INTERFACE_PASSWORD=yourescontrolpassword

MQTT_USERNAME=your_mqtt_username
MQTT_PASSWORD=your_mqtt_password

PUSHOVER_APP_TOKEN=your_pushover_app_token
PUSHOVER_USER_KEY=your_pushover_user_key</code></pre></figure><p>Au tour de <strong>objectconfig.ini</strong> qui doit ressembler au code ci-dessous. Avec la nouvelle version de ZMeventnotification, le paramétrage des moniteurs à été très simplifié</p><p><a href="https://zmeventnotification.readthedocs.io/en/latest/guides/hooks.html" target="_blank">Clic ici si tu veux lire la doc officielle.</a></p><p>Pour ces paramétrages n’hésitez pas à m’écrire mais dans premier lieu il s’agit de modifier les <strong>[monitor-x]</strong> en effet on ne met pas le nom de sa caméra mais si celle-ci est en première position on l’appellera monitor-1 et ainsi de suite, ci-dessous un exemple de monitoring de garage.</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell">[monitor-1]
# mon garage
model_sequence=alpr,object
object_detection_pattern=(person|car|motorbike)

[monitor-2]
#doorbell
model_sequence=face,object
object_detection_pattern=(person)

[ml]
use_sequence= yes # Important pour la prise en charge du nouveau système</code></pre></figure><p>afin de pouvoir utiliser la capture d’images par personne il faut crée un dossier s’il n’existe pas dans … nommé known_faces et intégrer à l’intérieur un sous dossier nommé nicolas ensuite intégrer des photos de vous qui serons nommé 1.png, 2.png, etc. lien direct de l’architecture <a href="https://zmeventnotification.readthedocs.io/en/latest/guides/hooks.html?highlight=known#known-faces-images" target="_blank">zmeventnotification known-faces</a></p><p>Une fois toutes les images insérées ou dès que tu ajoutes une nouvelle image, il faudra générer le train_face, donc rentrons dans le docker zoneminder:</p><figure class="highlight"><pre><code class="language-docker" data-lang="docker">docker exec -it zoneminder /bin/bash</code></pre></figure><p>Une fois toutes les images intégrées dans le dossier ou en cas de rajout d’images lance la commande suivante afin de générer le trainface:</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell">sudo -u www-data /var/lib/zmeventnotification/bin/zm_train_faces.py</code></pre></figure><p>redémarre les service</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell">sudo service zoneminder restart</code></pre></figure><p>et voilà si tout s’est bien passé Zmeventnotification devrait être fonctionnel.</p><h3 id="3---intégration-de-zoneminder-dans-home-assistant">3 - Intégration de Zoneminder dans Home Assistant</h3><p>les lignes de codes ci-dessous sont à rentrer dans la configuration.yaml de home-assistant pour connaître tous les paramètres consulte cette page officielle: <a href="https://www.home-assistant.io/integrations/zoneminder/" target="_blank">Intégration Zoneminder et Homeassistant</a>.</p><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-240-84b7847fa.webp 240w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-300-84b7847fa.webp 300w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-400-84b7847fa.webp 400w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-480-84b7847fa.webp 480w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-698-84b7847fa.webp 698w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-820-84b7847fa.webp 820w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-240-84b7847fa.png 240w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-300-84b7847fa.png 300w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-400-84b7847fa.png 400w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-480-84b7847fa.png 480w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-698-84b7847fa.png 698w, https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-820-84b7847fa.png 820w" type="image/png" /><img class="pictinpost lazyload" width="820" height="460" src="https://haade.fr/assets/images/generated/posts/21/detail-ha-zm-240-84b7847fa.png" alt="interface zoneminder dans home assistant" /></picture><p>interface complète de zoneminder dans home assistant</p><p>En plus de cette intégration dans home-assistant Zoneminder permet de faire remonter un service appelé <strong>zoneminder.set_run_state</strong>. Permet de Changer l’état de Zoneminder.</p><h2 id="quest-ce-quun-état-dans-zoneminder">Qu’est-ce qu’un état dans Zoneminder:</h2><p>Un état dans Zoneminder permet de gérer les Modes des caméras comme bon nous semble juste en basculant sur cet état.</p><p>Par défaut il existe 3 états dans Zm:</p><ol><li><strong>Arrêté:</strong> il désactive toutes les caméras<li><strong>Redémarré:</strong> il redémarre les caméras<li><strong>Défaut, EN MARCHE:</strong> réglage par défaut</ol><p>Pour Home Assistant j’ai créé deux nouveaux états, HOME c’est un état quand je suis au domicile, et AWAY quand je suis absent, ces états sont utilisés dans le cadre d’une automatisation par gestion d’alarme.</p><ol><li><strong>HOME:</strong> quand je suis à la maison les caméras intérieurs sont en mode Monitor et les extérieurs en Modect<li><strong>AWAY:</strong> quand je suis absent elles passent toutes en Modect.</ol><p><strong>IMPORTANT !</strong> les modes des caméras sont à paramétrer avant l’enregistrement d’un nouvel état voir le Gif ci-dessous.</p><p><strong>AVANTAGE:</strong> Par rapport au binary-sensor Zm qui permet de passer d’un mode à l’autre dans HA, le changement d’état est très pratique lorsque l’on veut choisir un autre mode, lorsqu’on à pleins de caméra et surtout simplifie les automatisations dans HA appel à un service sans avoir besoin de faire appel à chaque caméra ou de créer un groupe binary_sensor Home ou Away dans group.yaml de HA.</p><p><img src="/assets/images/posts/21/zoneminder-etat-820.webp" alt="Paramétrer un état dans zoneminder" width="820" height="394" class="lazyload pictaninpost" /></p><h3 id="4---fonctionnement-des-modes-dans-zoneminder">4 - Fonctionnement des Modes dans Zoneminder:</h3><ul><li><strong>Aucun:</strong> Moniteur désactivé. Aucun flux visualisé ni aucun événement généré.<li><strong>Nodect:</strong> Il s’agit d’un mode spécial conçu pour travailler avec des déclencheurs externes. Dans Nodect, aucune détection de mouvement n’a lieu mais les événements sont enregistrés sur déclencheurs externes<li><strong>Monitor:</strong> Le moniteur n’est disponible que pour la diffusion en direct. Sans analyse d’images ou évènements.<li><strong>Mocord:</strong> Le moniteur enregistre en continu, tout mouvement étant mis en évidence dans ces événements.<li><strong>Modect:</strong> Le moniteur analyse les images et génère des événements. La vidéo enregistre sur mouvement durant un temps déterminé.<li><strong>Record:</strong> Le moniteur enregistre en continu. Des événements d’une durée fixe se génèrent quel que soit le mouvement, de la même manière qu’un enregistrement vidéo à intervalle de temps conventionnel. <strong>Aucune détection de mouvement n’a lieu dans ce mode.</strong></ul><h2 id="fonctionnement-des-zones-dans-zoneminder">Fonctionnement des Zones dans Zoneminder</h2><p><a href="/fr/blog/Explication-des-Zones-dans-ZM">Un article est dédié aux zones et préréglages, clic ici !</a></p><h2 id="fonctionnement-de-filtres-dans-zoneminder">Fonctionnement de Filtres dans Zoneminder</h2><p>Un article est dédié aux filtres, clic ici !</p><h2 id="en-conclusion">En Conclusion</h2><p>Pour finir <strong>Zoneminder</strong> n’a peut être pas l’interface la plus belle mais par sa gratuité et la stabilité il est certainement le meilleur outil de gestion de caméra du moment. Une fois que l’on maîtrise bien les différents aspects, il devient alors pratique intuitif et indispensable du point de vue sécurité, <strong>l’intégration dans Home assistant est un plus non négligeable.</strong></p></div></div><div class="authorbox mb-5 mt-5 pt-4 pb-4" itemscope itemtype="https://schema.org/Person"><div class="row"><div class="wrapavname col-md-3 text-center"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-110-5d88b8595.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-110-c8508425c.png 1.0x" type="image/png"> <img class="author-thumb" itemprop="image" width="110" height="110" src="https://haade.fr/assets/images/generated/nico-110-c8508425c.png" alt="Nico"> </picture><p class="mt-4 mb-0 small text-center"> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="url" href="/fr/auteur-nico/"><i class="ico link-solid"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w"><i class="icob youtube"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://github.com/haade-administrator"><i class="icob github"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://discordapp.com/widget?id=637642871738073091&theme=dark&username=Nicoxygen#5644"><i class="icob discord"></i></a> <a class="d-inline-block mx-1 text-dark" itemprop="email" href="mailto:nico@haade.fr"><i class="ico envelope-solid"></i></a></p></div><div class="col-md-9"><h4 itemprop="name">Nico</h4><p class="mt-3 mb-0" itemprop="description">Membre fondateur du site Haade, voilà plus de 10 ans que je suis passionné de domotique, informatique et électronique. J'essaie à travers ce blog d'aider d'autres internautes à s'expérimenter en domotique, à trouver des tutos ludiques, bref à évoluer.</p></div></div></div><div class="comments mt-5"> <button class="btn btn-outline-dark py-2 px-5 d-block w-100 show-comments"><i class="ico comments-solid text-muted"></i> &nbsp; Afficher les Commentaires</button><div id="comments"><h4 class="mb-4">commentaires</h4><script src="https://giscus.app/client.js" data-repo=haade-administrator/haade.fr data-repo-id=R_kgDOHxeeuA data-category=Comments data-category-id=DIC_kwDOHxeeuM4CTn1C data-mapping=title data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-theme=light data-input-position=top data-loading=lazy data-lang=fr crossorigin=anonymous async> </script><div class="clearfix"></div></div></div><div class=" related-posts"><h2 class="text-center mb-4">Articles qui pourrait t'intéresser</h2><div class="d-flex justify-content-center align-items-center"> <a class="smoothscroll badge badge-primary text-capitalize" href="/fr/categorie/domotique">Domotique</a> <a class="smoothscroll badge badge-primary text-capitalize" href="/fr/categorie/securite">Securite</a></div><div class="blog-grid-container"><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/fr/blog/truenas-nouveautees-fangtooth-25-04-retrospection-electric-ell-24-10-le-gestionnaire-openzfs"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-300-3b3233af4.webp 300w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-400-3b3233af4.webp 400w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-500-3b3233af4.webp 500w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-600-3b3233af4.webp 600w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-700-3b3233af4.webp 700w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-800-3b3233af4.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-300-3b3233af4.png 300w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-400-3b3233af4.png 400w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-500-3b3233af4.png 500w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-600-3b3233af4.png 600w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-700-3b3233af4.png 700w, https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-800-3b3233af4.png 800w" type="image/png"> <img class="img-thumb lazyload" src="https://haade.fr/assets/images/generated/posts/162/truenas-ameliration-24-et-25-fangtooth-edition-logiciel-par-excellence-800-3b3233af4.png" alt="Mise à jour de l'OS TrueNAS scale le meilleur gestionnaire de NAS du moment !" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/fr/blog/truenas-nouveautees-fangtooth-25-04-retrospection-electric-ell-24-10-le-gestionnaire-openzfs">Mise à jour de l'OS TrueNAS scale le meilleur gestionnaire de NAS du moment !</a></h2><p class="card-text">Que le temps passe vite ! voilà maintenant plus d’un an que je ne me suis plus attardé sur le système embarqué pour Nas, TrueNAS. Comme tu le sais peu...</p></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-5d88b8595.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-c8508425c.png 1.0x" type="image/png"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-c8508425c.png" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/fr/auteur-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">4 mai 2025</span> </span><div class="clearfix"></div></div></div></div></div><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/fr/blog/test-portier-interphonie-hikvision-ds-kv8x13-et-integration-home-assistant"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-300-21d512c3c.webp 300w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-400-21d512c3c.webp 400w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-500-21d512c3c.webp 500w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-600-21d512c3c.webp 600w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-700-21d512c3c.webp 700w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-800-21d512c3c.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-300-21d512c3c.png 300w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-400-21d512c3c.png 400w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-500-21d512c3c.png 500w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-600-21d512c3c.png 600w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-700-21d512c3c.png 700w, https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-800-21d512c3c.png 800w" type="image/png"> <img class="img-thumb lazyload" src="https://haade.fr/assets/images/generated/posts/161/test-portier-voip-hikvision-ds-kv8x13-integration-home-assistant-frigate-800-21d512c3c.png" alt="Test du portier Hikvision DS-KV8x13" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/fr/blog/test-portier-interphonie-hikvision-ds-kv8x13-et-integration-home-assistant">Test du portier Hikvision DS-KV8x13</a><div class="mb-2 mt-2 font-weight-normal"><div class="rating-holder"><div class="Stars" style="--rating: 4.2; --star-background: #FF6600" title="Le produit est noté 4.2 sur 5."></div></div></div></h2><p class="card-text">Dans le cadre d’une installation pour contrôle d’accès d’une mairie et déjà domotisée avec Home Assistant, j’ai acheté un kit complet Hikvision car le prix est attractif et je sais...</p></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-5d88b8595.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-c8508425c.png 1.0x" type="image/png"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-c8508425c.png" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/fr/auteur-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">13 avril 2025</span> </span><div class="clearfix"></div></div></div></div></div><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/fr/blog/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-300-ff2b80a3e.webp 300w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-400-ff2b80a3e.webp 400w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-500-ff2b80a3e.webp 500w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-600-ff2b80a3e.webp 600w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-700-ff2b80a3e.webp 700w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-800-ff2b80a3e.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-300-ff2b80a3e.png 300w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-400-ff2b80a3e.png 400w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-500-ff2b80a3e.png 500w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-600-ff2b80a3e.png 600w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-700-ff2b80a3e.png 700w, https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-800-ff2b80a3e.png 800w" type="image/png"> <img class="img-thumb lazyload" src="https://haade.fr/assets/images/generated/posts/160/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir-800-ff2b80a3e.png" alt="Comparatif Cam Slim VS Gen 2 Sonoff" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/fr/blog/comparatif-camera-sonoff-cam-slim-vs-cam-slim-gen-2-laquelle-choisir">Comparatif Cam Slim VS Gen 2 Sonoff</a><div class="mb-2 mt-2 font-weight-normal"><div class="rating-holder"><div class="Stars" style="--rating: 4.8; --star-background: #FF6600" title="Le produit est noté 4.8 sur 5."></div></div></div></h2><p class="card-text">Ajourd’hui comparons les deux caméras du moment Sonoff disponibles à moins de 30€ chez tous les commerçants auxquels nous sommes affiliés. Je remercie Domadoo et Itead de m’avoir fournis ce...</p></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-5d88b8595.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-c8508425c.png 1.0x" type="image/png"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-c8508425c.png" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/fr/auteur-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">2 avril 2025</span> </span><div class="clearfix"></div></div></div></div></div></div></div></div></div><footer><div class="footcontent"><div class="footleft footbox"><div class="footupper"><div class="foottopic">À Propos</div><p>Haade est un blog destiné à aider les particuliers et professionnels à la mise en place d’un système domotique</p></div><div class="footlower"><div class="foottopic">Contactez-nous</div><div class="phone"> <a href="#"><i class="icos phone-volume-solid"></i>+0033 6 99 40 15 86</a></div><div class="email"> <a href="/fr/contact"><i class="icos envelope-solid"></i>Formulaire de contact</a></div></div></div><div class="footmiddle footbox"><div class="foottopic">Liens utiles</div><div><a href="/fr/rgpd-politique-de-confidentialite">Politique de confidentialité</a></div><div><a href="/fr/mentions-legales">Mentions legales</a></div><div><a target="_blank" href="https://buildwithmatter.com/">Protocole Matter</a></div><div><a target="_blank" href="https://zigbeealliance.org/fr/%C3%A9v%C3%A9nements/">Zigbee Alliance</a></div><div><a target="_blank" href="https://z-wavealliance.org/category/z-wave-in-the-news/">Z-wave Alliance</a></div><div><a target="_blank" href="https://www.aqara.com/eu/news.html">Aquara by Xiaomi</a></div><div><a target="_blank" href="https://itead.cc/">Itead Sonoff, Nextion</a></div></div><div class="footright footbox"><div class="foottopic">Inscrivez-vous à la Newsletter</div><form action="https://haade.us4.list-manage.com/subscribe/post?u=86f32891957737a57c0b4ade8&amp;id=92dadba2b4&amp;f_id=00639cebf0" method="post" name="embedded-mail" target="_blank"> <input type="email" placeholder="Entrez une adresse e-mail" name="EMAIL"> <input type="submit" name="Souscription" value="Envoyer" id="submit"> </form> <a href="https://github.com/haade-administrator/haade.fr/discussions" target="_blank" alt="github discussion link" aria-label="Continue la discussion sur le forum github"><i class="icob github" aria-hidden="true" title="github discussion"></i></a> <a target="_blank" href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w/?sub_confirmation=1" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Abonne toi à notre chaine youtube"><i class="icob youtube" aria-hidden="true" title="youtube"></i></a> <a target="_blank" href="https://discord.gg/FaK6MuZ2" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Invitation sur notre réseau Discord"><i class="icob discord" aria-hidden="true" title="discord"></i></a> <a href="/fr/feed.xml" target="_blank" alt="feed rss" aria-label="partage le flux rss avec tes amis"><i class="icob rss" aria-hidden="true" title="feed rss haade"></i></a></div></div></div><div class="footbottom"><p>Copyright © 2025 <a target="_blank" href="https://www.haade.fr">Haade</a> 🎉 by Nicoxygen</p></div></footer></div><script src="/assets/js/main.min.js?v=a0225e1608e525477f5b4a4ae3f3425c" type="text/javascript"></script> <script src="/assets/js/lunrsearchengine-fr.js?v=ceef0e36504019105ad7abc454ff314e"></script>

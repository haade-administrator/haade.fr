<!DOCTYPE html><html lang="fr-FR"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="icon" href="/assets/images/logo.png"><title>Hack Sonoff Zbbridge-pro et Esphome - Haade.fr</title><meta name="description" content="Comment hacker facilement le Sonoff Zbbridge-pro facilement sur Esphome et Home-Assistant et en faire une télécommande Zigbee, wifi et Bluetooth"><link rel="canonical" href="https://haade.fr/fr/blog/flasher-zbbridge-pro-esphome-home-assistant"><link rel="alternate" hreflang="en" href="https://haade.fr/en/blog/zbbridge-pro-flasher-esphome-home-assistant"/><link rel="alternate" hreflang="fr" href="https://haade.fr/fr/blog/flasher-zbbridge-pro-esphome-home-assistant"/><meta property="og:locale" content="fr-FR"><meta property="og:type" content="article"><meta property="og:title" content="Hack Sonoff Zbbridge-pro et Esphome"><meta property="og:description" content="Comment hacker facilement le Sonoff Zbbridge-pro facilement sur Esphome et Home-Assistant et en faire une télécommande Zigbee, wifi et Bluetooth"><meta property="og:url" content="https://haade.fr/fr/blog/flasher-zbbridge-pro-esphome-home-assistant"><meta property="og:site_name" content="Haade.fr"><meta property="og:image" content="https://haade.fr/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth.png"><meta property="article:author" content=""><meta property="article:published_time" content="2023-10-15T20:16:00+02:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "BlogPosting", "url": "https://haade.fr/fr/blog/flasher-zbbridge-pro-esphome-home-assistant", "name": "Hack Sonoff Zbbridge-pro et Esphome", "headline": "Hack Sonoff Zbbridge-pro et Esphome", "keywords": "Haade-lab,Zigbee", "description": "Comment hacker facilement le Sonoff Zbbridge-pro facilement sur Esphome et Home-Assistant et en faire une télécommande Zigbee, wifi et Bluetooth", "articleBody": "Il n’est plus à présenter, déjà deux ans que le Sonoff ZBbridge-pro est sortie, c’est une passerelle de contrôle tout en un (zigbee-wifi-bluetooth), exclusivement dédiés aux produits de la marque Sonoff. Mais grâce à ce tuto tu pourras l’utiliser avec ZHA ou Zigbee2mqtt. Tu trouveras sur internet plusieurs discussions qui te permettront de faire fonctionner le ZBbridge-pro dans Home Assistant, mais en installant un firmware Tasmota. Après quelques recherches j’ai pu hacker le ZBbridge-pro directement avec un Firmware Esphome et ainsi faire fonctionner la clé Zigbee cc2652 avec ZHA ou Zigbee2mqtt le tout très facilement.\n\n\n \n \n \n \n ZBBridge Pro\n Par Sonoff\n Passerelle déportée zigbee 3.0 cc2652p, wifi et bluetooth\n \n \n \n \n Achetez sur Domadoo\n \n \n Achetez sur Itead\n \n \n \n \n\n\nPrérequis\n\n Home-assistant installé\n Esphome installé\n Module de conversion usb uart ft232\n\n\nPrésentation du ZBbridge-pro\n\nMerci à Itead de m’avoir fourni ce module, tu pourras te rendre compte que le ZBbridge-pro dispose d’un emballage tout à fait ordinaire et aux couleurs emblématiques de la marque Sonoff. Pas de fioritures, une notice, un cable usb et un micro-module ZBbridge-pro.\n\n\n\nCette passerelle Sonoff ZBbridge-pro coûte entre 20 et 30 euros, elle a l’avantage d’être déporté d’utiliser le wifi, bluetooth et Zigbee 3.0, ce qui en fait une mini passerelle tout en un.\n\n\n Ne perdons pas de temps et passons au Hack.\n\n\nInjection du code Esphome\n\nComme écris plus haut ce tuto te permet de faire une intégration parfaite dans Home-Assistant grâce au module esphome.\n\nCommence par connecter le ZBbridge-pro en usb à l’aide d’un module Uart/ftdi. Pour accéder au circuit imprimé et afin de pouvoir connecter le Ftdi il faudra enlever les 4 mini-pads qui cachent les visses. Ensuite rien de plus simple connecte le ftdi suivant le tableau ci-dessous:\n\n\n\n\n \n \n Sonoff ZB Bridge PRO\n FTDI programmer\n \n \n 3V3\n Vcc/3.3v\n \n \n GND\n GND\n \n \n RX\n TX\n \n \n TX\n RX\n \n \n GPIO00\n GND (on power on)\n \n \n\n\nEnsuite crée un nouveau device dans l’onglet esphome ( attention le nom du module $devicename doit être tout attaché sans trait d’union ) et colle le code ci-dessous en adaptant les mots de passe.\n\nsubstitutions:\n devicename: zbbridge\n friendly_name: zb-bridge-pro\n\nwifi:\n ssid: !secret wifi_ssid\n password: !secret wifi_password\n\n # Enable fallback hotspot (captive portal) in case wifi connection fails\n ap:\n ssid: ${devicename}_ap\n password: !secret zbbridge_ap_password\n\ncaptive_portal:\n\nota:\n password: !secret zbbridge_ota_password\n \npackages:\n remote-packages:\n url: https://github.com/haade-administrator/zbbridge-pro.git\n ref: main\n refresh: 0s\n files: [\n esphome/esphome.yaml,\n esphome/binary_sensor.yaml,\n esphome/bluetooth.yaml,\n esphome/light.yaml,\n esphome/output.yaml,\n esphome/rtttl.yaml,\n esphome/sensor.yaml,\n esphome/output.yaml,\n esphome/switch.yaml,\n esphome/text_sensor.yaml,\n esphome/uart.yaml,\n esphome/stream_server.yaml,\n ] \n\nexternal_components:\n - source: github://oxan/esphome-stream-server\n\nLe dépôt github ne s’est pas fait tout seul je me suis fortement inspiré du dépôt Github source:\nIntégration Zbbridge-pro Giancky79\n\nIl ne te reste plus qu’à valider le code et à pousser le tout sur le Sonoff ZBbridge-pro.\n\nUne fois uploadé dernière étape d’intégration Esphome, rendez-vous dans les applications et configure ton device esphome, clic sur le lien ci-dessous.\n\n\n\n\n\n\nRendu du module dans esphome:\n\nÀ l’heure ou j’écris ce post tu auras accès à toutes les infos nécessaires, si tu ne désires pas utiliser le tracker du bluetooth qui est activé par défaut copie ces lignes de codes dans le modules esphome\n\nesp32_ble_tracker:\n scan_parameters:\n active: false\n\n\n\nQuelles sont les infos qui remontent dans esphome:\n\n zb_bridge_pro_fw_update ( switch reset et upload du firmware )\n zb_bridge_pro_uptime_readable (temps de lecture)\n température interne\n adresse ip\n adress mac\n le voltage de la batterie interne\n\n\n\n et bien d’autres encore …\n\n\nConfiguration ZHA\n\nSi tu souhaites utiliser la clé zigbee dans zha, ilte reste à configurer la clé comme sur les captures ci-dessous, clic sur le lien ci-dessous pour te rendre directement dans la config de la clé:\n\n\n\n\n\n\nEnsuite ouvre une seconde page et va dans l’intégration esphome en cliquant sur le lien ci-dessous:\n\n\n\n\n\n\nclic sur le bouton tout en haut zbbridge firmware update et lorsque la led passe au vert confirme l’intégration de la clé dans ZHA, si tu rencontres un soucis clic à nouveau sur le firmware update de esphome (la manip du toggle firmware update est la même pour mettre à jour le firmware de la clé zigbee). J’espère que ces infos sont assez claires à ton sens sinon contacte moi.\n\nsocket://[your_address_ip]:6638 // dans mon cas 192.168.1.217\nbaudrate: 115200\ntarget: sofware\n\nou \n\nsocket://[devicename.local]:6638 // remplace le device name par le nom de substitution dans mon cas **zbbridge**\nbaudrate: 115200\ntarget: software\n\nJ’ai fait une vidéo d’intégration de la clé zigbee dans zha avec un défaut d’intégration. Pour ce faire prépare l’adresse de la clé, ensuite enclanche le switch fx dans esphome et configure la clé rapidement, sinon relance l’opération et ça le fera. “ uniquement valable avec le firmware d’origine.\n\n Si tu upgrades avec le dernier firmware la découverte dans ZHA se fera sans avoir besoin de cliquer sur le switch fw.\n\n\n\n\nCi-dessous le fonctionnement lumineux après activation du switch. Le voyant vert te permet de savoir quand intégrer ou faire la mise à jour du firmware:\n\n\n\nConfiguration zigbee2mqtt\nLa configuration dans Z2M est légèrement différente cor tu feras un appel par tcp et non par socket\n\nVa dans le fichier configuration.yaml du dossier zigbee2mqtt et modifie les lignes suivante:\n\nPs: si tu ne sais pas comment modifier les fichiers dans HA installe le module File Editor en cliquant sur le lien ci-dessous:\n\n\n\n\n\n\nserial:\n port: tcp://[your_address_ip]:6638\n adapter: auto\n\nUpgrade du firmware zigbee 3.0\n\nPar défaut le firmware date de septembre 2022. Tu trouveras le firmware sur le github Zigbee2mqtt prend bien la version launchpad\n\nZ-stack zigbee2mqtt firmware launchpad cc2652p\n\nPour mettre à jour le firmware de la clé zigbee cc2652p suis le readme du dépot Haade dédié à ce tuto\ninstallation du dernier firmware Zigbee\n\nSi tu n’y arrives pas n’hésite pas à m’écrire\n\nDocuments Sonoff ZBbridge-pro\nSpécifications produits Sonoff Zbbridge-pro\n\nGuide rapide Sonoff Zbbridge-pro\n\nManuel complet Sonoff Zbbridge-pro\n\n\n \n \n \n \n ZBBridge Pro\n Par Sonoff\n Passerelle déportée zigbee 3.0 cc2652p, wifi et bluetooth\n \n \n \n \n Achetez sur Domadoo\n \n \n Achetez sur Itead\n \n \n \n \n\n\n\n\nConclusion\n\nVoilà un moyen simple de faire une intégration d’une clé ZBbridge-pro dans home-assistant avec un firmware Esphome. L’avantage de cette clé zigbee est facilement déportable car liée en wifi, tu pourras utiliser le sniffer BLE ( bluetooth 4.2) et la fameuse clé cc2652 zigbee 3.0, un tout en un.\n", "datePublished": "2023-10-15 20:16:00 +0200", "dateModified": "2023-10-15 20:16:00 +0200", "inLanguage": "fr-FR", "author": { "@type": "Person", "name": null, "alternateName": null, "description": null, "url": null,"image": null,"email": null }, "publisher": { "@type": "Organization", "name": "Haade.fr", "url": "https://haade.fr", "logo": { "@type": "ImageObject", "width": 250, "height": 63, "url": "https://haade.fr/assets/images/logo.png" } }, "mainEntityOfPage": { "@type": "WebPage", "@id": "https://haade.fr/fr/blog/flasher-zbbridge-pro-esphome-home-assistant" }, "image": { "@type": "ImageObject", "width": 250, "height": 94, "url": "https://haade.fr/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth.png" } } </script><link href="/assets/css/theme.css?v=1731379949736206381" media="screen, projection, print" rel="stylesheet"> <script data-goatcounter="https://haade.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><link rel="preload" href="/assets/fonts/montserrat/Montserrat-VariableFont_wght.woff2" as="font" crossorigin><link rel="preload" href="/assets/fonts/icomoon/icomoon.woff2?4fpajq" as="font" crossorigin><link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico" ><link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png" ><header><div class="firstnavbar"><div class="links"> <a href="/">Accueil</a> <a href="/fr/rgpd-politique-de-confidentialite/">RGPD</a> <a href="/fr/contact/">Contact</a><div class="sl-nav"> langue:<ul><li><b>Francais</b> <i class="ico angle-down-solid triangle-arrow trrow" aria-hidden="true"></i><div class="triangle"></div><ul class="show-flags"><li class="current"><a href="/fr/blog/flasher-zbbridge-pro-esphome-home-assistant"><i class="sl-flag fix flag-fr"><div id="Francais"></div></i><span class="active">Francais</span></a><li><a href="/en/blog/zbbridge-pro-flasher-esphome-home-assistant"><i class="sl-flag fix flag-england"><div id="English"></div></i><span class="active">English</span></a></ul></ul></div></div><div class="social-firstnav"> <a href="https://github.com/haade-administrator/haade.fr/discussions" target="_blank" alt="github discussion link" aria-label="Continue la discussion sur le forum github"><i class="icob github" width="1em" height="1em" aria-hidden="true" title="github discussion"></i></a> <a href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w/?sub_confirmation=1" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Abonne toi à notre chaine youtube"><i class="icob youtube" width="1em" height="1em" target="_blank" alt="youtube" aria-hidden="true" title="youtube"></i></a> <a href="https://discord.gg/FaK6MuZ2" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Invitation sur notre réseau Discord"><i class="icob discord" width="1em" height="1em" target="_blank" alt="discord" aria-hidden="true" title="discord"></i></a> <a href="/fr/feed.xml" target="_blank" alt="feed rss" aria-label="partage le flux rss avec tes amis"><i class="icob rss" width="1em" height="1em" aria-hidden="true" title="feed rss haade"></i></a></div></div><div class="secondheader"> <a class="navbar-brand" href="/"><picture> <source sizes="(max-width: 524px) 150px, 250px" srcset="https://haade.fr/assets/images/generated/logo-150-379587352.webp 150w, https://haade.fr/assets/images/generated/logo-250-379587352.webp 250w" type="image/webp"> <source sizes="(max-width: 524px) 150px, 250px" srcset="https://haade.fr/assets/images/generated/logo-150-64f85a78e.png 150w, https://haade.fr/assets/images/generated/logo-250-64f85a78e.png 250w" type="image/png"> <img id="logoIImage" src="https://haade.fr/assets/images/generated/logo-250-64f85a78e.png" alt="Logo officiel du site domotique Haade" width="250" height="94"> </picture> </a><p class="sitetag"> Home Assistance Alsace domotique & électronique.</p></div><nav id="nav"><div class="navbar"> <i class='icos bars-solid'></i><div class="nav-links"><div class="sidebar-logo"> <span class="logo-name">H2Ade</span> <i class='icos times-solid'></i></div><ul class="links"><li><a href="/">Accueil<span class="badge badge-light tags">142</span></a><li> <a href="https://haade.fr/fr/categorie/domotique">Domotique</a> <i class="icos angle-down-solid htmlcss-arrow-automation arrow"></i><ul class="htmlCss-sub-menu-automation sub-menu"><li><a href="/fr/categorie/securite">Sécurité</a><li class="more"> <span><a href="/fr/categorie/haade-lab">Tutos</a> <i class='icos angle-right-solid arrow more-arrow-automation'></i> </span><ul class="more-sub-menu-automation sub-menu"><li><a href="/fr/categorie/mini-tutos">Mini-tutos</a><li><a href="/fr/categorie/videos">Vidéos</a><li><a href="/fr/categorie/home-assistant">Home-Assistant</a><li><a href="/fr/categorie/jeedom">Jeedom</a></ul></ul><li><a href="/fr/categorie/news">News</a><li><a href="/fr/categorie/tests">Tests</a><li><a href="/fr/auteurs">Contributeurs<span class="badge badge-primary">News</span></a><li><a target="_blank" href="https://github.com/haade-administrator/haade.fr/discussions">Forum</a><li><a href="/fr/categorie-produit/boutique">Boutique</a> <i class="icos angle-down-solid htmlcss-arrow-shop arrow"></i><ul class="htmlCss-sub-menu-shop sub-menu"><li class="more"> <span><a href="#">Marque</a> <i class='icos angle-right-solid arrow more-arrow-brand'></i> </span><ul class="more-sub-menu-brand sub-menu"><li><a href="/fr/categorie-produit/jeedom">Jeedom</a><li><a href="/fr/categorie-produit/moes">Moes</a><li><a href="/fr/categorie-produit/neo-coolcam">Neo-Coolcam</a><li><a href="/fr/categorie-produit/nodon">Nodon</a><li><a href="/fr/categorie-produit/raspberry-pi">Raspberry Pi</a><li><a href="/fr/categorie-produit/shelly">Shelly</a><li><a href="/fr/categorie-produit/sonoff">Sonoff</a><li><a href="/fr/categorie-produit/tedee">Tedee</a><li><a href="/fr/categorie-produit/xiaomi">Xiaomi</a><li><a href="/fr/categorie-produit/zemismart">Zemismart</a><li><a href="/fr/categorie-produit/zooz">Zooz</a></ul><li class="more"> <span><a href="#">Protocole</a> <i class='ico angle-right-solid arrow more-arrow-protocol'></i> </span><ul class="more-sub-menu-protocol sub-menu"><li><a href="/fr/categorie-produit/bluetooth">Bluetooth</a><li><a href="/fr/categorie-produit/esp">Esp 32/8266</a><li><a href="/fr/categorie-produit/matter">Matter</a><li><a href="/fr/categorie-produit/wifi">Wifi</a><li><a href="/fr/categorie-produit/zigbee">Zigbee</a><li><a href="/fr/categorie-produit/zwave">Z-wave</a></ul></ul><li><div class="sl-nav"> langue:<ul><li><b>Francais</b> <i class="ico angle-down-solid triangle-arrow trrow" aria-hidden="true"></i><div class="triangle"></div><ul class="show-flags"><li class="current"><a href="/fr/blog/flasher-zbbridge-pro-esphome-home-assistant"><i class="sl-flag fix flag-fr"><div id="Francais"></div></i><span class="active">Francais</span></a><li><a href="/en/blog/zbbridge-pro-flasher-esphome-home-assistant"><i class="sl-flag fix flag-england"><div id="English"></div></i><span class="active">English</span></a></ul></ul></div></ul></div><script src="/assets/js/lunr.min.js?v=a944ea77ca394dff9a667d5aea56f0e9" type="text/javascript"></script><div class="search-box"> <i class='icos search-solid'></i><div class="input-box"> <form onSubmit="return lunr_search(document.getElementById('lunrsearch').value);" class="search-form" role="search"> <input autocomplete="on" id="lunrsearch" class="search-input" name="q" maxlength="200" placeholder="Recherche..." type="search" value=""> <input class="search-action" type="submit" value="Ok"> </form></div><div id="lunrsearchresults"><ul></ul></div></div></div></nav></header><div class="site-content"><div class="container"><div class="main-content"> <script> var addViews = ""; var addViewsValue = parseInt(addViews); var r = new XMLHttpRequest(); r.addEventListener('load', function() { var visits = parseInt(JSON.parse(this.responseText).count.replace(/\s/g, '')); var totalVisits = visits; if (!isNaN(addViewsValue)) { totalVisits += addViewsValue; } document.getElementById('visits').innerText = totalVisits; }); r.open('GET', 'https://haade.goatcounter.com/counter/' + encodeURIComponent(location.pathname) + '.json'); r.send(); </script><div class="entry-header"><nav class="ariane"><ol class="arianefil" itemscope itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a itemprop="item" href="https://haade.fr/"><span itemprop="name">Accueil</span></a><meta itemprop="position" content="1"><li><span class="prompt">&nbsp; > &nbsp;</span><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="https://haade.fr/fr/categorie/haade-lab"><span itemprop="name">Haade-lab</span></a><meta itemprop="position" content="2"><li><span class="prompt">&nbsp; > &nbsp;</span>Hack Sonoff Zbbridge-pro et Esphome</ol></nav><h1 class="posttitle">Hack Sonoff Zbbridge-pro et Esphome</h1><div class="d-flex align-items-start mt-4"><div class="authorpost"> <a href="/fr/auteur-nico"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-60-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-60-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="60" height="60" src="https://haade.fr/assets/images/generated/nico-60-78aa7390f.jpg" alt="Nico"> </picture> </a> Écris par <a href="/fr/auteur-nico"><b>Nico</b></a></div><div class="readingpost">&nbsp;<i class="icos calendar-check" width="1em" height="1em"></i> <span class="post-date"><time class="post-date" datetime="15-10-2023">15 octobre 2023 &nbsp; </time></span> <span><span class="reading-time" title="Temps de Lecture estimé"> <i class="icos history" width="1em" height="1em"></i> <strong> 6 min</strong> de lecture </span> </span><p><i class="icos eye-solid" width="1em" height="1em"></i> Cet Article a été vu <span id="visits" style="font-weight:bold">...</span> fois</p></div></div></div><div class="entry-featured-image"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) 800px, (min-width: 1025px) 940px, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-300-5fa32736a.webp 300w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-400-5fa32736a.webp 400w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-500-5fa32736a.webp 500w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-600-5fa32736a.webp 600w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-700-5fa32736a.webp 700w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-800-5fa32736a.webp 800w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-900-5fa32736a.webp 900w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-940-5fa32736a.webp 940w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) 800px, (min-width: 1025px) 940px, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-300-5fa32736a.png 300w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-400-5fa32736a.png 400w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-500-5fa32736a.png 500w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-600-5fa32736a.png 600w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-700-5fa32736a.png 700w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-800-5fa32736a.png 800w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-900-5fa32736a.png 900w, https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-940-5fa32736a.png 940w" type="image/png"> <img class="lazyload featured-image-post" width="940" height="529" itemprop="image" src="https://haade.fr/assets/images/generated/posts/86/hack-sonoff-zbbridge-pro-esphome-home-assistant-cle-deporte-zigbee-wifi-bluetooth-940-5fa32736a.png" alt="Hack Sonoff Zbbridge-pro et Esphome"> </picture></div><div class="article-post"><p><em></em></p><div class="toc mt-4 mb-4 lead"><h3 class="font-weight-bold">Sommaire</h3><ul class="table_of"><li class="toc"><a href="#prérequis" class="toc_anchor">Prérequis</a><li class="toc"><a href="#présentation-du-zbbridge-pro" class="toc_anchor">Présentation du ZBbridge-pro</a><li class="toc"><a href="#injection-du-code-esphome" class="toc_anchor">Injection du code Esphome</a><li class="toc"><a href="#configuration-zha" class="toc_anchor">Configuration ZHA</a><li class="toc"><a href="#configuration-zigbee2mqtt" class="toc_anchor">Configuration zigbee2mqtt</a><li class="toc"><a href="#upgrade-du-firmware-zigbee-30" class="toc_anchor">Upgrade du firmware zigbee 3.0</a><li class="toc"><a href="#documents-sonoff-zbbridge-pro" class="toc_anchor">Documents Sonoff ZBbridge-pro</a><li class="toc"><a href="#conclusion" class="toc_anchor">Conclusion</a></ul></div><div class="content-post"><p>Il n’est plus à présenter, déjà deux ans que le <strong>Sonoff ZBbridge-pro</strong> est sortie, c’est une passerelle de contrôle tout en un (zigbee-wifi-bluetooth), exclusivement dédiés aux produits de la marque Sonoff. Mais grâce à ce tuto tu pourras <strong>l’utiliser avec ZHA ou Zigbee2mqtt</strong>. Tu trouveras sur internet plusieurs discussions qui te permettront de faire fonctionner le <strong>ZBbridge-pro</strong> dans Home Assistant, <strong>mais en installant un firmware Tasmota</strong>. Après quelques recherches j’ai pu hacker le ZBbridge-pro directement avec un Firmware Esphome et ainsi faire fonctionner <strong>la clé Zigbee cc2652 avec ZHA ou Zigbee2mqtt</strong> le tout très facilement.</p><div class="embedproduct"><div class="embedproduct-picture"><img class="pictinpost lazyload" width="250" height="250" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-src="https://i0.wp.com/itead.cc/wp-content/uploads/2022/04/Zigbee-bridge-pro.jpg?fit=1000%2C1000&amp;ssl=1" alt="Passerelle déportée zigbee 3.0 cc2652p, wifi et bluetooth" /></div><div class="text"><div class="embedproduct-info"><h2 class="no_toc">ZBBridge Pro</h2><h3 class="no_toc">Par Sonoff</h3><p>Passerelle déportée zigbee 3.0 cc2652p, wifi et bluetooth</p></div><div class="embedproduct-price"><div class="embedaffiliate"> <span class="dombutton" role="button"><a href="https://www.domadoo.fr/fr/peripheriques/6321-sonoff-box-domotique-zigbee-30-wifi-pro.html?domid=39" target="_blank" rel="nofollow noopener"><img src="/assets/images/domadoo.png" width="20" height="20" class="lazyload" alt="domadoo logo" /> Achetez sur Domadoo</a></span> <span class="iteadbutton" role="button"><a href="https://itead.cc/product/sonoff-zigbee-bridge-pro/ref/122/" target="_blank" rel="nofollow noopener"><img src="/assets/images/itead-payment.png" width="20" height="20" class="lazyload" alt="itead logo" /> Achetez sur Itead</a></span></div></div></div></div><h2 id="prérequis">Prérequis</h2><ul><li>Home-assistant installé<li>Esphome installé<li>Module de <a href="/fr/produit/module-de-conversion-usb-uart-ft232" target="_blank">conversion usb uart ft232</a></ul><h2 id="présentation-du-zbbridge-pro">Présentation du ZBbridge-pro</h2><p>Merci à Itead de m’avoir fourni ce module, tu pourras te rendre compte que le ZBbridge-pro dispose d’un emballage tout à fait ordinaire et aux couleurs emblématiques de la marque Sonoff. Pas de fioritures, une notice, un cable usb et un micro-module ZBbridge-pro.</p><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-240-53c48dd28.webp 240w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-300-53c48dd28.webp 300w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-400-53c48dd28.webp 400w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-480-53c48dd28.webp 480w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-698-53c48dd28.webp 698w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-820-53c48dd28.webp 820w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-240-53c48dd28.png 240w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-300-53c48dd28.png 300w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-400-53c48dd28.png 400w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-480-53c48dd28.png 480w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-698-53c48dd28.png 698w, https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-820-53c48dd28.png 820w" type="image/png" /><img class="pictinpost lazyload" width="940" height="529" src="https://haade.fr/assets/images/generated/posts/86/presentation-sonoff-passerelle-zbbridge-pro-esphome-home-assistant-240-53c48dd28.png" alt="présentation du Sonoff ZBbridge-pro et présentation du circuit imprimé" /></picture><p>Cette passerelle Sonoff ZBbridge-pro coûte entre 20 et 30 euros, <strong>elle a l’avantage d’être déporté d’utiliser le wifi, bluetooth et Zigbee 3.0, ce qui en fait une mini passerelle tout en un</strong>.</p><blockquote><p>Ne perdons pas de temps et passons au Hack.</p></blockquote><h2 id="injection-du-code-esphome">Injection du code Esphome</h2><p>Comme écris plus haut ce tuto te permet de faire une intégration parfaite dans Home-Assistant grâce au module esphome.</p><p>Commence par connecter le ZBbridge-pro en usb à l’aide d’un module Uart/ftdi. Pour accéder au circuit imprimé et afin de pouvoir connecter le Ftdi il faudra enlever les 4 mini-pads qui cachent les visses. Ensuite rien de plus simple connecte le ftdi suivant le tableau ci-dessous:</p><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-240-83ecd2cc6.webp 240w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-300-83ecd2cc6.webp 300w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-400-83ecd2cc6.webp 400w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-480-83ecd2cc6.webp 480w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-698-83ecd2cc6.webp 698w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-820-83ecd2cc6.webp 820w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-240-83ecd2cc6.png 240w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-300-83ecd2cc6.png 300w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-400-83ecd2cc6.png 400w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-480-83ecd2cc6.png 480w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-698-83ecd2cc6.png 698w, https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-820-83ecd2cc6.png 820w" type="image/png" /><img class="pictinpost lazyload" width="940" height="582" src="https://haade.fr/assets/images/generated/posts/86/branchement-ftdi-uart-connection-esphome-sonoff-zbbridge-pro-240-83ecd2cc6.png" alt="branchement ftdi sur Sonoff ZBbridge-pro pour esphome" /></picture><table><tbody><tr><td>Sonoff ZB Bridge PRO<td>FTDI programmer<tr><td>3V3<td>Vcc/3.3v<tr><td>GND<td>GND<tr><td>RX<td>TX<tr><td>TX<td>RX<tr><td>GPIO00<td>GND (on power on)</table><p>Ensuite crée un nouveau device dans l’onglet esphome ( attention le nom du module <strong>$devicename</strong> doit être tout attaché sans trait d’union ) et colle le code ci-dessous en adaptant les mots de passe.</p><figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">substitutions:
  devicename: zbbridge
  friendly_name: zb-bridge-pro

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: ${devicename}_ap
    password: !secret zbbridge_ap_password

captive_portal:

ota:
  password: !secret zbbridge_ota_password
  
packages:
  remote-packages:
    url: https://github.com/haade-administrator/zbbridge-pro.git
    ref: main
    refresh: 0s
    files: [
      esphome/esphome.yaml,
      esphome/binary_sensor.yaml,
      esphome/bluetooth.yaml,
      esphome/light.yaml,
      esphome/output.yaml,
      esphome/rtttl.yaml,
      esphome/sensor.yaml,
      esphome/output.yaml,
      esphome/switch.yaml,
      esphome/text_sensor.yaml,
      esphome/uart.yaml,
      esphome/stream_server.yaml,
   ]  

external_components:
  - source: github://oxan/esphome-stream-server</code></pre></figure><p>Le dépôt github ne s’est pas fait tout seul je me suis fortement inspiré du dépôt Github source: <a href="https://github.com/Giancky79/ZB-Bridge-P" target="_blank">Intégration Zbbridge-pro Giancky79</a></p><p>Il ne te reste plus qu’à valider le code et à pousser le tout sur le Sonoff ZBbridge-pro.</p><p>Une fois uploadé dernière étape d’intégration Esphome, rendez-vous dans les applications et <strong>configure ton device esphome, clic sur le lien ci-dessous</strong>.</p><div class="myhomeassistant"><a href="https://my.home-assistant.io/redirect/integrations/" target="_blank"><img src="https://my.home-assistant.io/badges/integrations.svg" class="lazyload" width="318.5" height="48" alt="Homeassistant Intégration" /></a></div><p><strong>Rendu du module dans esphome:</strong></p><p>À l’heure ou j’écris ce post tu auras accès à toutes les infos nécessaires, si tu ne désires pas utiliser le tracker du bluetooth qui est activé par défaut copie ces lignes de codes dans le modules esphome</p><figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">esp32_ble_tracker:
  scan_parameters:
    active: false</code></pre></figure><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-240-9b7363a62.webp 240w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-300-9b7363a62.webp 300w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-400-9b7363a62.webp 400w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-480-9b7363a62.webp 480w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-698-9b7363a62.webp 698w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-820-9b7363a62.webp 820w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-240-9b7363a62.png 240w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-300-9b7363a62.png 300w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-400-9b7363a62.png 400w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-480-9b7363a62.png 480w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-698-9b7363a62.png 698w, https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-820-9b7363a62.png 820w" type="image/png" /><img class="pictinpost lazyload" width="940" height="948" src="https://haade.fr/assets/images/generated/posts/86/integration-sonoff-zbbridge-pro-esphome-commande-240-9b7363a62.png" alt="rendu de la passerelle Sonoff ZBbridge-pro dans esphome" /></picture><p><strong>Quelles sont les infos qui remontent dans esphome:</strong></p><ul><li>zb_bridge_pro_fw_update ( switch reset et upload du firmware )<li>zb_bridge_pro_uptime_readable (temps de lecture)<li>température interne<li>adresse ip<li>adress mac<li>le voltage de la batterie interne</ul><blockquote><p>et bien d’autres encore …</p></blockquote><h2 id="configuration-zha">Configuration ZHA</h2><p>Si tu souhaites utiliser la clé zigbee dans zha, ilte reste à configurer la clé comme sur les captures ci-dessous, clic sur le lien ci-dessous pour te rendre directement dans la config de la clé:</p><div class="myhomeassistant"><a href="https://my.home-assistant.io/redirect/config_flow_start/?domain=zha" target="_blank"><img src="https://my.home-assistant.io/badges/config_flow_start.svg" class="lazyload" width="291.5" height="48" alt="Homeassistant add Intégration" /></a></div><p>Ensuite ouvre une seconde page et va dans l’intégration esphome en cliquant sur le lien ci-dessous:</p><div class="myhomeassistant"><a href="https://my.home-assistant.io/redirect/integration/?domain=esphome" target="_blank"><img src="https://my.home-assistant.io/badges/integration.svg" class="lazyload" width="311.5" height="48" alt="Homeassistant configure integration" /></a></div><p>clic sur le bouton tout en haut zbbridge firmware update et lorsque la led passe au vert confirme l’intégration de la clé dans ZHA, si tu rencontres un soucis clic à nouveau sur le firmware update de esphome <em>(la manip du toggle firmware update est la même pour mettre à jour le firmware de la clé zigbee)</em>. J’espère que ces infos sont assez claires à ton sens sinon contacte moi.</p><figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">socket://[your_address_ip]:6638 // dans mon cas 192.168.1.217
baudrate: 115200
target: sofware

ou 

socket://[devicename.local]:6638 // remplace le device name par le nom de substitution dans mon cas **zbbridge**
baudrate: 115200
target: software</code></pre></figure><p>J’ai fait une vidéo d’intégration de la clé zigbee dans zha avec un défaut d’intégration. Pour ce faire prépare l’adresse de la clé, ensuite enclanche le switch fx dans esphome et configure la clé rapidement, sinon relance l’opération et ça le fera. “ uniquement valable avec le firmware d’origine.</p><blockquote><p>Si tu upgrades avec le <a href="https://github.com/Koenkk/Z-Stack-firmware/raw/master/coordinator/Z-Stack_3.x.0/bin/CC1352P2_CC2652P_launchpad_coordinator_20230507.zip" target="_blank">dernier firmware</a> la découverte dans ZHA se fera sans avoir besoin de cliquer sur le switch fw.</p></blockquote><p><img src="/assets/images/posts/86/integration-zha-zigbee-esphome-zbbridge-pro.webp" alt="Méthode de connection et de fonctionnement de la clé cc2652 zigbee du zbbridge-pro dans ZHA" width="720" height="384" class="lazyload pictaninpost" /></p><p>Ci-dessous le fonctionnement lumineux après activation du switch. <strong>Le voyant vert te permet de savoir quand intégrer</strong> ou faire la mise à jour du firmware:</p><p><img src="/assets/images/posts/86/zigbee-firmware-update-esphome-sonoff-zbbridge-pro.webp" alt="Fonctionnement du switch firmware zigbee dans esphome" width="400" height="275" class="lazyload pictaninpost" /></p><h2 id="configuration-zigbee2mqtt">Configuration zigbee2mqtt</h2><p>La configuration dans Z2M est légèrement différente cor tu feras un appel par tcp et non par socket</p><p>Va dans le fichier <strong>configuration.yaml</strong> du dossier zigbee2mqtt et modifie les lignes suivante:</p><p>Ps: si tu ne sais pas comment modifier les fichiers dans HA installe le module <strong>File Editor</strong> en cliquant sur le lien ci-dessous:</p><div class="myhomeassistant"><a href="https://my.home-assistant.io/redirect/supervisor_ingress/?addon=core_configurator" target="_blank"><img src="https://my.home-assistant.io/badges/supervisor_ingress.svg" class="lazyload" width="371" height="48" alt="Homeassistant supervisor addons ingress" /></a></div><figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">serial:
  port: tcp://[your_address_ip]:6638
  adapter: auto</code></pre></figure><h2 id="upgrade-du-firmware-zigbee-30">Upgrade du firmware zigbee 3.0</h2><p>Par défaut le firmware date de septembre 2022. Tu trouveras le firmware sur le github Zigbee2mqtt prend bien la version launchpad</p><p><a href="https://github.com/Koenkk/Z-Stack-firmware/tree/master/coordinator/Z-Stack_3.x.0/bin" target="_blank">Z-stack zigbee2mqtt firmware launchpad cc2652p</a></p><p>Pour mettre à jour le firmware de la clé zigbee cc2652p <strong>suis le readme du dépot Haade dédié à ce tuto</strong> <a href="https://github.com/haade-administrator/zbbridge-pro#upgrade-firmware-z-stack-zigbee-to-zbbridge-p">installation du dernier firmware Zigbee</a></p><p>Si tu n’y arrives pas n’hésite pas à m’écrire</p><h2 id="documents-sonoff-zbbridge-pro">Documents Sonoff ZBbridge-pro</h2><div class="contentlink"><a href="/assets/images/posts/86/ZB-Bridge-pro-specification-product.pdf" target="_blank">Spécifications produits Sonoff Zbbridge-pro</a><i class="icor file-pdf-regular"></i></div><div class="contentlink"><a href="/assets/images/posts/86/ZB-Bridge-Pro-quick-install.pdf" target="_blank">Guide rapide Sonoff Zbbridge-pro</a><i class="icor file-pdf-regular"></i></div><div class="contentlink"><a href="/assets/images/posts/86/ZB-Bridge-Pro-user-manual.pdf" target="_blank">Manuel complet Sonoff Zbbridge-pro</a><i class="icor file-pdf-regular"></i></div><div class="embedproduct"><div class="embedproduct-picture"><img class="pictinpost lazyload" width="250" height="250" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-src="https://i0.wp.com/itead.cc/wp-content/uploads/2022/04/Zigbee-bridge-pro.jpg?fit=1000%2C1000&amp;ssl=1" alt="Passerelle déportée zigbee 3.0 cc2652p, wifi et bluetooth" /></div><div class="text"><div class="embedproduct-info"><h2 class="no_toc">ZBBridge Pro</h2><h3 class="no_toc">Par Sonoff</h3><p>Passerelle déportée zigbee 3.0 cc2652p, wifi et bluetooth</p></div><div class="embedproduct-price"><div class="embedaffiliate"> <span class="dombutton" role="button"><a href="https://www.domadoo.fr/fr/peripheriques/6321-sonoff-box-domotique-zigbee-30-wifi-pro.html?domid=39" target="_blank" rel="nofollow noopener"><img src="/assets/images/domadoo.png" width="20" height="20" class="lazyload" alt="domadoo logo" /> Achetez sur Domadoo</a></span> <span class="iteadbutton" role="button"><a href="https://itead.cc/product/sonoff-zigbee-bridge-pro/ref/122/" target="_blank" rel="nofollow noopener"><img src="/assets/images/itead-payment.png" width="20" height="20" class="lazyload" alt="itead logo" /> Achetez sur Itead</a></span></div></div></div></div><picture><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-240-fc555f250.webp 240w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-300-fc555f250.webp 300w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-400-fc555f250.webp 400w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-480-fc555f250.webp 480w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-698-fc555f250.webp 698w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-820-fc555f250.webp 820w" type="image/webp" /><source sizes="(max-width: 480px) 480px, (max-width: 768px) 698px, (max-width: 1024px) 820px, (min-width: 1025px) 820px" srcset="https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-240-fc555f250.png 240w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-300-fc555f250.png 300w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-400-fc555f250.png 400w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-480-fc555f250.png 480w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-698-fc555f250.png 698w, https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-820-fc555f250.png 820w" type="image/png" /><img class="pictinpost lazyload" width="940" height="940" src="https://haade.fr/assets/images/generated/posts/86/specification-sonoff-zbbridge-pro-240-fc555f250.png" alt="specification du Sonoff ZBbridge-pro" /></picture><h2 id="conclusion">Conclusion</h2><p>Voilà un moyen simple de faire une intégration d’une clé ZBbridge-pro dans home-assistant avec un firmware Esphome. L’avantage de cette clé zigbee est facilement déportable car liée en wifi, tu pourras utiliser le sniffer BLE ( bluetooth 4.2) et la fameuse clé cc2652 zigbee 3.0, <strong>un tout en un</strong>.</p></div></div><div class="sourcelink"> <span class="titlesource">Articles source</span><ol><li class="contentlink"> <a rel="canonical" href="https://community.home-assistant.io/t/itead-sonoff-zigbee-bridge-pro-zbbridge-p-new-cc2652p-and-esp32-based-zigbee-gateway-to-wifi-bridge/378924/22" target="_blank">community.home-assistant.io</a><i class="icos external-link-alt-solid"></i><li class="contentlink"> <a rel="canonical" href="https://jonasled.dev/jonasled/sonoff-zigbee-bridge-pro-esphome/-/blob/master/zigbee_bridge.yaml?ref_type=heads" target="_blank">jonasled.dev</a><i class="icos external-link-alt-solid"></i><li class="contentlink"> <a rel="canonical" href="https://github.com/Giancky79/ZB-Bridge-P" target="_blank">github.com</a><i class="icos external-link-alt-solid"></i><li class="contentlink"> <a rel="canonical" href="https://itead.cc/product/sonoff-zigbee-bridge-pro/ref/122/" target="_blank">itead.cc</a><i class="icos external-link-alt-solid"></i></ol></div><div class="rating mt-4 mb-4 d-flex align-items-center"> <strong class="mr-1">Vote:</strong><div class="rating-holder"><div class="Stars" style="--rating: 4.0; --star-background: #FF6600" title="Le produit est noté 4.0 sur 5."></div></div></div><div class="authorbox mb-5 mt-5 pt-4 pb-4" itemscope itemtype="https://schema.org/Person"><div class="row"><div class="wrapavname col-md-3 text-center"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-110-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-110-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="110" height="110" src="https://haade.fr/assets/images/generated/nico-110-78aa7390f.jpg" alt="Nico"> </picture><p class="mt-4 mb-0 small text-center"> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="url" href="/fr/auteur-nico/"><i class="ico link-solid"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w"><i class="icob youtube"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://github.com/haade-administrator"><i class="icob github"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://discordapp.com/widget?id=637642871738073091&theme=dark&username=Nicoxygen#5644"><i class="icob discord"></i></a> <a class="d-inline-block mx-1 text-dark" itemprop="email" href="mailto:nico@haade.fr"><i class="ico envelope-solid"></i></a></p></div><div class="col-md-9"><h4 itemprop="name">Nico</h4><p class="mt-3 mb-0" itemprop="description">Membre fondateur du site Haade, un passionné de domotique avec toutes les astuces qui vont biens.</p></div></div></div><div class="comments mt-5"> <button class="btn btn-outline-dark py-2 px-5 d-block w-100 show-comments"><i class="ico comments-solid text-muted"></i> &nbsp; Afficher les Commentaires</button><div id="comments"><h4 class="mb-4">commentaires</h4><script src="https://giscus.app/client.js" data-repo=haade-administrator/haade.fr data-repo-id=R_kgDOHxeeuA data-category=Comments data-category-id=DIC_kwDOHxeeuM4CTn1C data-mapping=title data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-theme=light data-input-position=top data-loading=lazy data-lang=fr crossorigin=anonymous async> </script><div class="clearfix"></div></div></div><div class=" related-posts"><h2 class="text-center mb-4">Articles qui pourrait t'intéresser</h2><div class="d-flex justify-content-center align-items-center"> <a class="smoothscroll badge badge-primary text-capitalize" href="/fr/categorie/haade-lab">Haade-lab</a> <a class="smoothscroll badge badge-primary text-capitalize" href="/fr/categorie/zigbee">Zigbee</a></div><div class="blog-grid-container"><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/fr/blog/remplace-ton-systeme-de-chauffage-conventionnel-par-des-modules-de-la-gamme-sonoff"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-300-ca7f69003.webp 300w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-400-ca7f69003.webp 400w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-500-ca7f69003.webp 500w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-600-ca7f69003.webp 600w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-700-ca7f69003.webp 700w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-800-ca7f69003.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-300-ca7f69003.png 300w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-400-ca7f69003.png 400w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-500-ca7f69003.png 500w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-600-ca7f69003.png 600w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-700-ca7f69003.png 700w, https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-800-ca7f69003.png 800w" type="image/png"> <img class="img-thumb lazyload" src="https://haade.fr/assets/images/generated/posts/144/controle-ton-chauffage-avec-sonoff-nspanel-pro-et-contact-sec-RE5VC-dans-Ewelink-800-ca7f69003.png" alt="Sonoff - Domotise ton chauffage conventionnel" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/fr/blog/remplace-ton-systeme-de-chauffage-conventionnel-par-des-modules-de-la-gamme-sonoff">Sonoff - Domotise ton chauffage conventionnel</a></h2><p class="card-text">Afin de préparer au mieux le prochain Live, et toujours dans le but d’approfondir nos connaissances sur les modules de la gamme Sonoff, nous allons essayer dans cet article de...</p></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/fr/auteur-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">24 octobre 2024</span> </span><div class="clearfix"></div></div></div></div></div><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/fr/blog/box-homey-pro-la-box-aux-multi-protocoles-qui-fait-parler-d-elle"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-300-ed74e87ac.webp 300w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-400-ed74e87ac.webp 400w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-500-ed74e87ac.webp 500w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-600-ed74e87ac.webp 600w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-700-ed74e87ac.webp 700w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-800-ed74e87ac.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-300-ed74e87ac.png 300w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-400-ed74e87ac.png 400w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-500-ed74e87ac.png 500w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-600-ed74e87ac.png 600w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-700-ed74e87ac.png 700w, https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-800-ed74e87ac.png 800w" type="image/png"> <img class="img-thumb lazyload" src="https://haade.fr/assets/images/generated/posts/143/athom-homey-pro-box-domotique-test-800-ed74e87ac.png" alt="Box Homey Pro - la force tranquille" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/fr/blog/box-homey-pro-la-box-aux-multi-protocoles-qui-fait-parler-d-elle">Box Homey Pro - la force tranquille</a><div class="mb-2 mt-2 font-weight-normal"><div class="rating-holder"><div class="Stars" style="--rating: 4.4; --star-background: #FF6600" title="Le produit est noté 4.4 sur 5."></div></div></div></h2><p class="card-text">Voilà un test que j’ai hâte de te présenter, grâce à Athom le fabriquant de la box Homey Pro (Early 2023) et Domadoo, j’ai pu acquérir une box Homey Pro...</p></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/fr/auteur-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">14 octobre 2024</span> </span><div class="clearfix"></div></div></div></div></div><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/fr/blog/domotise-ton-chauffage-grace-au-sonoff-nspanel-pro-live-youtube"><picture> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-300-d9c39f430.webp 300w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-400-d9c39f430.webp 400w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-500-d9c39f430.webp 500w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-600-d9c39f430.webp 600w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-700-d9c39f430.webp 700w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-800-d9c39f430.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-300-d9c39f430.png 300w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-400-d9c39f430.png 400w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-500-d9c39f430.png 500w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-600-d9c39f430.png 600w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-700-d9c39f430.png 700w, https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-800-d9c39f430.png 800w" type="image/png"> <img class="img-thumb lazyload" src="https://haade.fr/assets/images/generated/posts/142/domotise-ton-chgauffage-grace-a-sonoff-et-le-nspanel-pro-800-d9c39f430.png" alt="Domotise ton chauffage avec Sonoff NSPanel Pro" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/fr/blog/domotise-ton-chauffage-grace-au-sonoff-nspanel-pro-live-youtube">Domotise ton chauffage avec Sonoff NSPanel Pro</a></h2><p class="card-text">Pour aller plus loin dans notre démarche et pour ceux qui ne veulent pas investir dans une box domotique Home assistant, nous préparons un live qui aura lieu le 7...</p></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/fr/auteur-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">3 octobre 2024</span> </span><div class="clearfix"></div></div></div></div></div></div></div></div></div><footer><div class="footcontent"><div class="footleft footbox"><div class="footupper"><div class="foottopic">À Propos</div><p>Haade est un blog destiné à aider les particuliers et professionnels à la mise en place d’un système domotique</p></div><div class="footlower"><div class="foottopic">Contactez-nous</div><div class="phone"> <a href="#"><i class="icos phone-volume-solid"></i>+0033 6 99 40 15 86</a></div><div class="email"> <a href="/fr/contact"><i class="icos envelope-solid"></i>Formulaire de contact</a></div></div></div><div class="footmiddle footbox"><div class="foottopic">Liens utiles</div><div><a href="/fr/rgpd">Politique de confidentialité</a></div><div><a href="/fr/mentions-legales">Mentions legales</a></div><div><a target="_blank" href="https://buildwithmatter.com/">Protocole Matter</a></div><div><a target="_blank" href="https://zigbeealliance.org/fr/%C3%A9v%C3%A9nements/">Zigbee Alliance</a></div><div><a target="_blank" href="https://z-wavealliance.org/category/z-wave-in-the-news/">Z-wave Alliance</a></div><div><a target="_blank" href="https://www.aqara.com/eu/news.html">Aquara by Xiaomi</a></div><div><a target="_blank" href="https://itead.cc/">Itead Sonoff, Nextion</a></div></div><div class="footright footbox"><div class="foottopic">Inscrivez-vous à la Newsletter</div><form action="https://haade.us4.list-manage.com/subscribe/post?u=86f32891957737a57c0b4ade8&amp;id=92dadba2b4&amp;f_id=00639cebf0" method="post" name="embedded-mail" target="_blank"> <input type="email" placeholder="Entrez une adresse e-mail" name="EMAIL"> <input type="submit" name="Souscription" value="Envoyer" id="submit"> </form> <a href="https://github.com/haade-administrator/haade.fr/discussions" target="_blank" alt="github discussion link" aria-label="Continue la discussion sur le forum github"><i class="icob github" aria-hidden="true" title="github discussion"></i></a> <a target="_blank" href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w/?sub_confirmation=1" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Abonne toi à notre chaine youtube"><i class="icob youtube" aria-hidden="true" title="youtube"></i></a> <a target="_blank" href="https://discord.gg/FaK6MuZ2" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Invitation sur notre réseau Discord"><i class="icob discord" aria-hidden="true" title="discord"></i></a> <a href="/fr/feed.xml" target="_blank" alt="feed rss" aria-label="partage le flux rss avec tes amis"><i class="icob rss" aria-hidden="true" title="feed rss haade"></i></a></div></div></div><div class="footbottom"><p>Copyright © 2024 <a target="_blank" href="https://www.haade.fr">Haade</a> 🎉 by Nicoxygen</p></div></footer></div><script src="/assets/js/main.min.js?v=ace684cfe98fc0b9d684c87b0573a5f2" type="text/javascript"></script> <script src="/assets/js/lunrsearchengine-fr.js?v=ceef0e36504019105ad7abc454ff314e"></script>

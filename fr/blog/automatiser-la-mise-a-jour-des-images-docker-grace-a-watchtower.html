<!DOCTYPE html><html lang="fr-FR"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="icon" href="/assets/images/logo.png"><title>Automatiser La Mise A Jour Des Images Docker Grace A Watchtower - Haade.fr</title><meta name="description" content="Rendre automatique les mises Ã  jour des images docker grÃ¢ce Ã  watchtower"><meta name="author" content="Nico"><link rel="canonical" href="https://haade.fr/fr/blog/automatiser-la-mise-a-jour-des-images-docker-grace-a-watchtower"><link rel="alternate" hreflang="fr" href="https://haade.fr/fr/blog/automatiser-la-mise-a-jour-des-images-docker-grace-a-watchtower"/><meta property="og:locale" content="fr-FR"><meta property="og:type" content="article"><meta property="og:title" content="Automatiser La Mise A Jour Des Images Docker Grace A Watchtower"><meta property="og:description" content="Rendre automatique les mises Ã  jour des images docker grÃ¢ce Ã  watchtower"><meta property="og:url" content="https://haade.fr/fr/blog/automatiser-la-mise-a-jour-des-images-docker-grace-a-watchtower"><meta property="og:site_name" content="Haade.fr"><meta property="og:image" content="https://haade.fr/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1.png"><meta property="article:author" content="Nico"><meta property="article:published_time" content="2020-01-01T19:16:57+00:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "BlogPosting", "url": "https://haade.fr/fr/blog/automatiser-la-mise-a-jour-des-images-docker-grace-a-watchtower", "name": "Automatiser La Mise A Jour Des Images Docker Grace A Watchtower", "headline": "Automatiser La Mise A Jour Des Images Docker Grace A Watchtower", "keywords": "Domotique,Haade-lab,Docker", "description": "Rendre automatique les mises Ã  jour des images docker grÃ¢ce Ã  watchtower", "articleBody": "Pour commencer, lâ€™utilisation de docker est dâ€™une simplicitÃ© dÃ©concertante, tellement dÃ©concertante que lâ€™on a tendance Ã  ouvrir beaucoup de container Ã  lâ€™intÃ©rieur de notre propre systÃ¨me. Par exemple sur le NAS du domicile jâ€™ai 12 containers qui tournent en mÃªme temps et tout Ã§a nâ€™utilise que 10% de mes ressources processeurs/mÃ©moires. Alors utiliser docker câ€™est bien mais automatiser la mise Ã  jour des images docker avec watchtower câ€™est primoridal pour la sÃ©curitÃ©. Câ€™est pourquoi jâ€™ai installÃ© lâ€™image watchtower Â« tour de guet Â» en bon franÃ§ais.\n\nÃ€ quoi sert Watchtower\n\nAlors que fait cette image. Avec watchtower, vous pouvez mettre Ã  jour la version en cours dâ€™exÃ©cution de votre application conteneurisÃ©e simplement en poussant une nouvelle image vers le Docker Hub ou votre propre registre dâ€™images. Watchtower supprimera votre ancienne image, fermera gracieusement votre conteneur existant et le redÃ©marrera avec les mÃªmes options que celles utilisÃ©es lors de son dÃ©ploiement initial. ExÃ©cutez le conteneur Watchtower avec la commande suivante:\n\ndocker run -d \\\n --name watchtower \\\n -v /var/run/docker.sock:/var/run/docker.sock \\\n containrrr/watchtower\n\nwatchtower fermera proprement votre container existant en enregistrant les options et arguments de son dÃ©ploiement initial.\n\nEnsuite tour de guet tÃ©lÃ©chargeras lâ€™application nouvelle image , une fois la nouvelle image installÃ©e, lâ€™ancienne image pourras Ãªtre supprimÃ©e automatiquement.\n\npour finir watchtower ouvrira le container avec toutes ses options initialement dÃ©ployÃ©es.\n\nparmi les options que je trouve les plus intÃ©ressantes de watchtower on peut:\n\n\n choisir de supprimer lâ€™ancienne image pratique car le stockage des images peut Ãªtre consÃ©quent\n Ãªtre notifiÃ© par email par exemple lors dâ€™une mise Ã  jour\n lancer une tÃ¢che Caron la nuit par exemple de vÃ©rification pour ne pas surcharger ses ressources en pleins jours oÃ¹ bloquer lâ€™accÃ¨s Ã  un de ses sites WordPress par exemple.\n choisir de ne mettre Ã  jour que certaines images\n\n\nDocumentation officielle de Watchtower\n\nCi joint la documentation officielle de Watchtower \nDocumentation officielle Watchtower\n\nListe des Arguments disponibles\nArguments Watchtower\n\nLe code docker ci-dessous avec lâ€™argument\n--schedule \"0 2 * * *\nnous permet de programmer la recherche de mise Ã  jour des images Ã  2h00 du matin afin de ne pas stopper les services des images en cours le jour.\n\nGÃ©nÃ©rateur dâ€™horaire Cron\n\ngÃ©nÃ©rateur crontab Watchtower\n\nCe qui pourrait Ãªtre dÃ©rangeant si nous avons un site wordpress par exemple. Lâ€™argument --cleanup nous permet dâ€™effacer lâ€™ancienne image aprÃ¨s une mise Ã  jour rÃ©ussi. Afin de ne pas saturer notre disque dur inutilement.\n\ndocker run -d \\\n --name watchtower \\\n -v /var/run/docker.sock:/var/run/docker.sock \\\n --restart always \\\n containrrr/watchtower \\\n --schedule &quot;0 2 * * *&quot; \\\n --cleanup\n\nSi On veut faire les mises Ã  jours de certaines images il suffit de mettre le nom des images containers concernÃ©es. Ainsi dans lâ€™exemple ci-dessous seul les images nommÃ© Jeedom et Homeassistant seront mises Ã  jour.\n\ndocker run -d \\\n --name watchtower \\\n -v /var/run/docker.sock:/var/run/docker.sock \\\n containrrr/watchtower \\\n jeedom homeassistant\n\nPour Conclure jâ€™utilise personnellement Watchtower depuis de nombreux mois sur une douzaine de containers et je nâ€™ai jamais rencontrÃ© de problÃ¨mes suite Ã  une mise Ã  jour. Câ€™est un indispensable de la virtualisation Docker. Beaucoup dâ€™images ont validÃ©s leurs compatibilitÃ©s, comme celle gÃ©nÃ©rÃ©es par linuxserver.io\n", "datePublished": "2020-01-01 19:16:57 +0000", "dateModified": "2020-01-01 19:16:57 +0000", "inLanguage": "fr-FR", "author": { "@type": "Person","name": "Nico", "alternateName": "Nico", "description": "Membre fondateur du site Haade, un passionnÃ© de domotique avec toutes les astuces qui vont biens.", "url": "/fr/auteur-nico/","image": "https://haade.fr/nico.jpg","email": "nico@haade.fr" }, "publisher": { "@type": "Organization", "name": "Haade.fr", "url": "https://haade.fr", "logo": { "@type": "ImageObject", "width": 250, "height": 63, "url": "https://haade.fr/assets/images/logo.png" } }, "mainEntityOfPage": { "@type": "WebPage", "@id": "https://haade.fr/fr/blog/automatiser-la-mise-a-jour-des-images-docker-grace-a-watchtower" }, "image": { "@type": "ImageObject", "width": 250, "height": 94, "url": "https://haade.fr/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1.png" } } </script><link href="/assets/css/theme.css?v=1707359231851608629" media="screen, projection, print" rel="stylesheet"> <script data-goatcounter="https://haade.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><link rel="preload" href="/assets/fonts/montserrat/Montserrat-VariableFont_wght.woff2" as="font" crossorigin><link rel="preload" href="/assets/fonts/icomoon/icomoon.woff2?4fpajq" as="font" crossorigin><link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico" ><link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png" ><header><div class="firstnavbar"><div class="links"> <a href="/">Accueil</a> <a href="/fr/rgpd-politique-de-confidentialite/">RGPD</a> <a href="/fr/contact/">Contact</a><div class="sl-nav"> langue:<ul><li><b>Francais</b> <i class="ico angle-down-solid triangle-arrow trrow" aria-hidden="true"></i><div class="triangle"></div><ul class="show-flags"><li class="current"><a href="/fr/blog/automatiser-la-mise-a-jour-des-images-docker-grace-a-watchtower"><i class="sl-flag fix flag-fr"><div id="Francais"></div></i><span class="active">Francais</span></a><li><a href="/en/index.html"><i class="sl-flag fix flag-england"><div id="English"></div></i><span class="active">English</span></a></ul></ul></div></div><div class="social-firstnav"> <a href="https://github.com/haade-administrator/haade.fr/discussions" target="_blank" alt="github discussion link" aria-label="Continue la discussion sur le forum github"><i class="icob github" width="1em" height="1em" aria-hidden="true" title="github discussion"></i></a> <a href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w/?sub_confirmation=1" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Abonne toi Ã  notre chaine youtube"><i class="icob youtube" width="1em" height="1em" target="_blank" alt="youtube" aria-hidden="true" title="youtube"></i></a> <a href="https://discord.gg/FaK6MuZ2" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Invitation sur notre rÃ©seau Discord"><i class="icob discord" width="1em" height="1em" target="_blank" alt="discord" aria-hidden="true" title="discord"></i></a> <a href="/fr/feed.xml" target="_blank" alt="feed rss" aria-label="partage le flux rss avec tes amis"><i class="icob rss" width="1em" height="1em" aria-hidden="true" title="feed rss haade"></i></a></div></div><div class="secondheader"> <a class="navbar-brand" href="/"><picture> <source sizes="(max-width: 524px) 150px, 250px" srcset="https://haade.fr/assets/images/generated/logo-150-379587352.webp 150w, https://haade.fr/assets/images/generated/logo-250-379587352.webp 250w" type="image/webp"> <source sizes="(max-width: 524px) 150px, 250px" srcset="https://haade.fr/assets/images/generated/logo-150-64f85a78e.png 150w, https://haade.fr/assets/images/generated/logo-250-64f85a78e.png 250w" type="image/png"> <img id="logoIImage" src="https://haade.fr/assets/images/generated/logo-250-64f85a78e.png" alt="Logo officiel du site domotique Haade" width="250" height="94"> </picture> </a><p class="sitetag"> Home Assistance Alsace domotique & Ã©lectronique.</p></div><nav id="nav"><div class="navbar"> <i class='icos bars-solid'></i><div class="nav-links"><div class="sidebar-logo"> <span class="logo-name">H2Ade</span> <i class='icos times-solid'></i></div><ul class="links"><li><a href="/">Accueil<span class="badge badge-light tags">105</span></a><li> <a href="https://haade.fr/fr/categorie/domotique">Domotique</a> <i class="icos angle-down-solid htmlcss-arrow-automation arrow"></i><ul class="htmlCss-sub-menu-automation sub-menu"><li><a href="/fr/categorie/securite">SÃ©curitÃ©</a><li class="more"> <span><a href="/fr/categorie/haade-lab">Tutos</a> <i class='icos angle-right-solid arrow more-arrow-automation'></i> </span><ul class="more-sub-menu-automation sub-menu"><li><a href="/fr/categorie/docker">Docker</a><li><a href="/fr/categorie/home-assistant">Home-Assistant</a><li><a href="/fr/categorie/jeedom">Jeedom</a></ul></ul><li><a href="/fr/categorie/news">News</a><li><a href="/fr/categorie/tests">Tests</a><li><a href="/fr/auteurs">Contributeurs<span class="badge badge-primary">News</span></a><li><a target="_blank" href="https://github.com/haade-administrator/haade.fr/discussions">Forum</a><li><a href="/fr/categorie-produit/boutique">Boutique</a> <i class="icos angle-down-solid htmlcss-arrow-shop arrow"></i><ul class="htmlCss-sub-menu-shop sub-menu"><li class="more"> <span><a href="/fr/categorie-produit/marque">Marque</a> <i class='icos angle-right-solid arrow more-arrow-brand'></i> </span><ul class="more-sub-menu-brand sub-menu"><li><a href="/fr/categorie-produit/jeedom">Jeedom</a><li><a href="/fr/categorie-produit/moes">Moes</a><li><a href="/fr/categorie-produit/neo-coolcam">Neo-Coolcam</a><li><a href="/fr/categorie-produit/nodon">Nodon</a><li><a href="/fr/categorie-produit/raspberry-pi">Raspberry Pi</a><li><a href="/fr/categorie-produit/sonoff">Sonoff</a><li><a href="/fr/categorie-produit/xiaomi">Xiaomi</a><li><a href="/fr/categorie-produit/zemismart">Zemismart</a></ul><li class="more"> <span><a href="/fr/categorie-produit/protocole">Protocole</a> <i class='ico angle-right-solid arrow more-arrow-protocol'></i> </span><ul class="more-sub-menu-protocol sub-menu"><li><a href="/fr/categorie-produit/esp">Esp 32/8266</a><li><a href="/fr/categorie-produit/wifi">Wifi</a><li><a href="/fr/categorie-produit/zigbee">Zigbee</a><li><a href="/fr/categorie-produit/zwave">Z-wave</a><li><a href="/fr/categorie-produit/matter">Matter</a></ul></ul><li><div class="sl-nav"> langue:<ul><li><b>Francais</b> <i class="ico angle-down-solid triangle-arrow trrow" aria-hidden="true"></i><div class="triangle"></div><ul class="show-flags"><li class="current"><a href="/fr/blog/automatiser-la-mise-a-jour-des-images-docker-grace-a-watchtower"><i class="sl-flag fix flag-fr"><div id="Francais"></div></i><span class="active">Francais</span></a><li><a href="/en/index.html"><i class="sl-flag fix flag-england"><div id="English"></div></i><span class="active">English</span></a></ul></ul></div></ul></div><script src="/assets/js/lunr.min.js?v=a944ea77ca394dff9a667d5aea56f0e9" type="text/javascript"></script><div class="search-box"> <i class='icos search-solid'></i><div class="input-box"> <form onSubmit="return lunr_search(document.getElementById('lunrsearch').value);" class="search-form" role="search"> <input autocomplete="on" id="lunrsearch" class="search-input" name="q" maxlength="200" placeholder="Recherche..." type="search" value=""> <input class="search-action" type="submit" value="Ok"> </form></div><div id="lunrsearchresults"><ul></ul></div></div></div></nav></header><div class="site-content"><div class="container"><div class="main-content"> <script> var addViews = "1085"; var addViewsValue = parseInt(addViews); var r = new XMLHttpRequest(); r.addEventListener('load', function() { var visits = parseInt(JSON.parse(this.responseText).count.replace(/\s/g, '')); var totalVisits = visits; if (!isNaN(addViewsValue)) { totalVisits += addViewsValue; } document.getElementById('visits').innerText = totalVisits; }); r.open('GET', 'https://haade.goatcounter.com/counter/' + encodeURIComponent(location.pathname) + '.json'); r.send(); </script><div class="entry-header"><nav class="ariane"><ol class="arianefil" itemscope itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a itemprop="item" href="https://haade.fr/"><span itemprop="name">Accueil</span></a><meta itemprop="position" content="1"><li><span class="prompt">&nbsp; > &nbsp;</span><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="https://haade.fr/fr/categorie/domotique"><span itemprop="name">Domotique</span></a><meta itemprop="position" content="2"><li><span class="prompt">&nbsp; > &nbsp;</span><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="https://haade.fr/fr/categorie/haade-lab"><span itemprop="name">Haade-lab</span></a><meta itemprop="position" content="3"><li><span class="prompt">&nbsp; > &nbsp;</span>Automatiser La Mise A Jour Des Images Docker Grace A Watchtower</ol></nav><h1 class="posttitle">Automatiser La Mise A Jour Des Images Docker Grace A Watchtower</h1><div class="d-flex align-items-start mt-4"><div class="authorpost"> <a href="/fr/author-nico"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-60-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-60-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="60" height="60" src="https://haade.fr/assets/images/generated/nico-60-78aa7390f.jpg" alt="Nico"> </picture> </a></div><div class="readingpost"><a href="/fr/author-nico"><b>Nico</b></a> &nbsp; <i class="icos calendar-check" width="1em" height="1em"></i> <span class="post-date"><time class="post-date" datetime="01-01-2020"> 1<sup>er</sup> janvier 2020 &nbsp; </time></span> <span><span class="reading-time" title="Temps de Lecture estimÃ©"> <i class="icos history" width="1em" height="1em"></i> <strong> 3 min</strong> de lecture </span> </span><p><i class="icos eye-solid" width="1em" height="1em"></i> Cet Article a Ã©tÃ© vu <span id="visits" style="font-weight:bold">...</span> fois</p></div></div></div><div class="entry-featured-image"><picture class="lazyimg"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) 800px, (min-width: 1025px) 940px, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-300-0111e8900.webp 300w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-400-0111e8900.webp 400w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-500-0111e8900.webp 500w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-600-0111e8900.webp 600w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-700-0111e8900.webp 700w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-800-0111e8900.webp 800w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-900-0111e8900.webp 900w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-940-0111e8900.webp 940w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) 800px, (min-width: 1025px) 940px, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-300-0111e8900.png 300w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-400-0111e8900.png 400w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-500-0111e8900.png 500w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-600-0111e8900.png 600w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-700-0111e8900.png 700w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-800-0111e8900.png 800w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-900-0111e8900.png 900w, https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-940-0111e8900.png 940w" type="image/png"> <img class="featured-image-post" width="940" height="529" itemprop="image" src="https://haade.fr/assets/images/generated/posts/2/automatiser-mise-a-jour-image-sur-docker-avec-watchtower-1-940-0111e8900.png" alt="Automatiser La Mise A Jour Des Images Docker Grace A Watchtower"> </picture></div><div class="article-post"><div class="toc mt-4 mb-4 lead"><h3 class="font-weight-bold">Sommaire</h3><ul class="table_of"><li class="toc"><a href="#Ã -quoi-sert-watchtower" class="toc_anchor">Ã€ quoi sert Watchtower</a><ul class="toc_sub"><li class="toc"><a href="#documentation-officielle-de-watchtower" class="toc_anchor">Documentation officielle de Watchtower</a><li class="toc"><a href="#gÃ©nÃ©rateur-dhoraire-cron" class="toc_anchor">GÃ©nÃ©rateur dâ€™horaire Cron</a></ul></ul></div><div class="content-post"><p>Pour commencer, lâ€™utilisation de docker est dâ€™une simplicitÃ© dÃ©concertante, tellement dÃ©concertante que lâ€™on a tendance Ã  ouvrir beaucoup de container Ã  lâ€™intÃ©rieur de notre propre systÃ¨me. Par exemple sur le NAS du domicile jâ€™ai 12 containers qui tournent en mÃªme temps et tout Ã§a nâ€™utilise que 10% de mes ressources processeurs/mÃ©moires. <strong><em>Alors utiliser docker câ€™est bien mais automatiser la mise Ã  jour des images docker avec watchtower câ€™est primoridal pour la sÃ©curitÃ©.</em></strong> Câ€™est pourquoi jâ€™ai installÃ© lâ€™image watchtower Â« tour de guet Â» en bon franÃ§ais.</p><h2 id="Ã -quoi-sert-watchtower">Ã€ quoi sert Watchtower</h2><p>Alors que fait cette image. Avec watchtower, vous pouvez mettre Ã  jour la version en cours dâ€™exÃ©cution de votre application conteneurisÃ©e simplement en poussant une nouvelle image vers le Docker Hub ou votre propre registre dâ€™images. Watchtower supprimera votre ancienne image, fermera gracieusement votre conteneur existant et le redÃ©marrera avec les mÃªmes options que celles utilisÃ©es lors de son dÃ©ploiement initial. ExÃ©cutez le conteneur Watchtower avec la commande suivante:</p><figure class="highlight"><pre><code class="language-docker" data-lang="docker">docker run -d \
    --name watchtower \
    -v /var/run/docker.sock:/var/run/docker.sock \
    containrrr/watchtower</code></pre></figure><p>watchtower fermera proprement votre container existant en enregistrant les options et arguments de son dÃ©ploiement initial.</p><p>Ensuite tour de guet tÃ©lÃ©chargeras lâ€™application nouvelle image , une fois la nouvelle image installÃ©e, lâ€™ancienne image pourras Ãªtre supprimÃ©e automatiquement.</p><p>pour finir watchtower ouvrira le container avec toutes ses options initialement dÃ©ployÃ©es.</p><p>parmi les options que je trouve les plus intÃ©ressantes de watchtower on peut:</p><ul><li>choisir de supprimer lâ€™ancienne image pratique car le stockage des images peut Ãªtre consÃ©quent<li>Ãªtre notifiÃ© par email par exemple lors dâ€™une mise Ã  jour<li>lancer une tÃ¢che Caron la nuit par exemple de vÃ©rification pour ne pas surcharger ses ressources en pleins jours oÃ¹ bloquer lâ€™accÃ¨s Ã  un de ses sites WordPress par exemple.<li>choisir de ne mettre Ã  jour que certaines images</ul><h3 id="documentation-officielle-de-watchtower">Documentation officielle de Watchtower</h3><p>Ci joint la documentation officielle de Watchtower <br /> <a href="https://containrrr.github.io/watchtower/" target="_blank">Documentation officielle Watchtower</a></p><p>Liste des Arguments disponibles<br /> <a href="https://containrrr.github.io/watchtower/arguments/" target="_blank">Arguments Watchtower</a></p><p>Le code docker ci-dessous avec lâ€™argument <code>--schedule "0 2 * * *</code> nous permet de programmer la recherche de mise Ã  jour des images Ã  2h00 du matin afin de ne pas stopper les services des images en cours le jour.</p><h3 id="gÃ©nÃ©rateur-dhoraire-cron">GÃ©nÃ©rateur dâ€™horaire Cron</h3><p><a href="https://toolki.com/fr/crontab" target="_blank">gÃ©nÃ©rateur crontab Watchtower</a></p><p>Ce qui pourrait Ãªtre dÃ©rangeant si nous avons un site wordpress par exemple. Lâ€™argument <code>--cleanup</code> nous permet dâ€™effacer lâ€™ancienne image aprÃ¨s une mise Ã  jour rÃ©ussi. Afin de ne pas saturer notre disque dur inutilement.</p><figure class="highlight"><pre><code class="language-docker" data-lang="docker">docker run -d \
    --name watchtower \
    -v /var/run/docker.sock:/var/run/docker.sock \
    --restart always \
    containrrr/watchtower \
    --schedule &quot;0 2 * * *&quot; \
    --cleanup</code></pre></figure><p>Si On veut faire les mises Ã  jours de certaines images il suffit de mettre le nom des <strong>images containers concernÃ©es</strong>. Ainsi dans lâ€™exemple ci-dessous seul les images nommÃ© <a href="/fr/blog/installation-complete-et-securisee-de-jeedom-sur-docker">Jeedom</a> et Homeassistant seront mises Ã  jour.</p><figure class="highlight"><pre><code class="language-docker" data-lang="docker">docker run -d \
    --name watchtower \
    -v /var/run/docker.sock:/var/run/docker.sock \
    containrrr/watchtower \
    jeedom homeassistant</code></pre></figure><p>Pour Conclure jâ€™utilise personnellement Watchtower depuis de nombreux mois sur une douzaine de containers et je nâ€™ai jamais rencontrÃ© de problÃ¨mes suite Ã  une mise Ã  jour. <strong><em>Câ€™est un indispensable de la virtualisation Docker</em></strong>. Beaucoup dâ€™images ont validÃ©s leurs compatibilitÃ©s, comme celle gÃ©nÃ©rÃ©es par linuxserver.io</p></div></div><div class="authorbox mb-5 mt-5 pt-4 pb-4" itemscope itemtype="https://schema.org/Person"><div class="row"><div class="wrapavname col-md-3 text-center"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-110-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-110-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="110" height="110" src="https://haade.fr/assets/images/generated/nico-110-78aa7390f.jpg" alt="Nico"> </picture><p class="mt-4 mb-0 small text-center"> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="url" href="/fr/auteur-nico/"><i class="ico link-solid"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w"><i class="icob youtube"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://github.com/haade-administrator"><i class="icob github"></i></a> <a target="_blank" class="d-inline-block mx-1 text-dark" itemprop="sameAs" href="https://discordapp.com/widget?id=637642871738073091&theme=dark&username=Nicoxygen#5644"><i class="icob discord"></i></a> <a class="d-inline-block mx-1 text-dark" itemprop="email" href="mailto:nico@haade.fr"><i class="ico envelope-solid"></i></a></p></div><div class="col-md-9"><h4 itemprop="name">Nico</h4><p class="mt-3 mb-0" itemprop="description">Membre fondateur du site Haade, un passionnÃ© de domotique avec toutes les astuces qui vont biens.</p></div></div></div><div class="comments mt-5"> <button class="btn btn-outline-dark py-2 px-5 d-block w-100 show-comments"><i class="ico comments-solid text-muted"></i> &nbsp; Afficher les Commentaires</button><div id="comments"><h4 class="mb-4">commentaires</h4><script src="https://giscus.app/client.js" data-repo=haade-administrator/haade.fr data-repo-id=R_kgDOHxeeuA data-category=Comments data-category-id=DIC_kwDOHxeeuM4CTn1C data-mapping=title data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-theme=light data-input-position=top data-loading=lazy data-lang=fr crossorigin=anonymous async> </script><div class="clearfix"></div></div></div><div class=" related-posts"><h2 class="text-center mb-4">Articles qui pourrait t'intÃ©resser</h2><div class="d-flex justify-content-center align-items-center"> <a class="smoothscroll badge badge-primary text-capitalize" href="/fr/categorie/domotique">Domotique</a> <a class="smoothscroll badge badge-primary text-capitalize" href="/fr/categorie/haade-lab">Haade-lab</a> <a class="smoothscroll badge badge-primary text-capitalize" href="/fr/categorie/docker">Docker</a></div><div class="blog-grid-container"><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/fr/blog/frigate-nvr-google-coral-ai-acceleration-materielle"><picture class="lazyimg"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-300-8c2c1743b.webp 300w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-400-8c2c1743b.webp 400w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-500-8c2c1743b.webp 500w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-600-8c2c1743b.webp 600w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-700-8c2c1743b.webp 700w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-800-8c2c1743b.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-300-8c2c1743b.png 300w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-400-8c2c1743b.png 400w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-500-8c2c1743b.png 500w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-600-8c2c1743b.png 600w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-700-8c2c1743b.png 700w, https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-800-8c2c1743b.png 800w" type="image/png"> <img class="img-thumb" src="https://haade.fr/assets/images/generated/posts/107/test-google-coral-frigate-home-assistant-ai-fait-il-le-job-800-8c2c1743b.png" alt="Google Coral AI et Frigate" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/fr/blog/frigate-nvr-google-coral-ai-acceleration-materielle">Google Coral AI et Frigate</a><div class="mb-2 mt-2 font-weight-normal"><div class="rating-holder"><div class="Stars" style="--rating: 5.0; --star-background: #FF6600" title="Le produit est notÃ© 5.0 sur 5."></div></div></div></h2><h4 class="card-text">Un petit tuto pour te montrer les bienfaits dâ€™un google coral dans ton NAS. Jâ€™utilise le NVR frigate qui traite par lâ€™ia les images afin dâ€™interprÃ©ter une dÃ©tection dâ€™objet et...</h4></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/fr/author-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">5 fÃ©vrier 2024</span> </span><div class="clearfix"></div></div></div></div></div><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/fr/blog/comparatif-tete-thermostatique-robinet-zigbee-xiaomi-sonoff-moes"><picture class="lazyimg"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-300-38f9b07e5.webp 300w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-400-38f9b07e5.webp 400w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-500-38f9b07e5.webp 500w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-600-38f9b07e5.webp 600w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-700-38f9b07e5.webp 700w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-800-38f9b07e5.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-300-38f9b07e5.png 300w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-400-38f9b07e5.png 400w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-500-38f9b07e5.png 500w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-600-38f9b07e5.png 600w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-700-38f9b07e5.png 700w, https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-800-38f9b07e5.png 800w" type="image/png"> <img class="img-thumb" src="https://haade.fr/assets/images/generated/posts/106/comparatif-tete-thermostatique-xiaomi-sonoff-moes-zigbee-800-38f9b07e5.png" alt="Comparatif tÃªtes thermostatiques Zigbee" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/fr/blog/comparatif-tete-thermostatique-robinet-zigbee-xiaomi-sonoff-moes">Comparatif tÃªtes thermostatiques Zigbee</a></h2><h4 class="card-text">Depuis lâ€™annÃ©e derniÃ¨re le gouvernement nous conseille de chauffer notre habitat Ã  19Â°C par soucis dâ€™Ã©conomies dâ€™Ã©nergies. Plus rÃ©cent encore une subvention est proposÃ©e, et comme câ€™est souvent le cas...</h4></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/fr/author-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">29 janvier 2024</span> </span><div class="clearfix"></div></div></div></div></div><div class="blog-grid-item"><div class="card h-100"><div class="maxthumb"> <a href="/fr/blog/installation-home-assistant-os-armbian-cubietruck-facile-2024"><picture class="lazyimg"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-300-609e8ea1a.webp 300w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-400-609e8ea1a.webp 400w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-500-609e8ea1a.webp 500w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-600-609e8ea1a.webp 600w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-700-609e8ea1a.webp 700w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-800-609e8ea1a.webp 800w" type="image/webp"> <source sizes="(max-width: 480px) calc(100vw - 30px), (max-width: 768px) calc(100vw - 30px), (max-width: 1024px) calc(50vw - 15px), (min-width: 1025px) 25vw, calc(100vw - 30px)" srcset="https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-300-609e8ea1a.png 300w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-400-609e8ea1a.png 400w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-500-609e8ea1a.png 500w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-600-609e8ea1a.png 600w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-700-609e8ea1a.png 700w, https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-800-609e8ea1a.png 800w" type="image/png"> <img class="img-thumb" src="https://haade.fr/assets/images/generated/posts/101/installation-haos-armbian-cubietruck-2024-800-609e8ea1a.png" alt="Installation HAOS avec Armbian Bookworm 12" width="1200" height="675"> </picture> </a></div><div class="card-body"><h2 class="card-title"> <a class="text-dark" href="/fr/blog/installation-home-assistant-os-armbian-cubietruck-facile-2024">Installation HAOS avec Armbian Bookworm 12</a></h2><h4 class="card-text">Nous sommes bientÃ´t en 2024 et il est toujours aussi difficile dâ€™installer Home Assistant OS sur des cartes non prises en charges. Pour le bien des test produits jâ€™ai comme...</h4></div><div class="card-footer bg-white"><div class="wrapfooter"> <span class="meta-footer-thumb"><picture> <source srcset="https://haade.fr/assets/images/generated/nico-40-477f2654d.webp 1.0x" type="image/webp"> <source srcset="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg 1.0x" type="image/jpeg"> <img class="author-thumb" itemprop="image" width="40" height="40" src="https://haade.fr/assets/images/generated/nico-40-78aa7390f.jpg" alt="Nico"> </picture> </span> <span class="author-meta"> <a href="/fr/author-nico"><span class="post-name font-weight-bold">Nico</span></a> <span class="post-date">26 dÃ©cembre 2023</span> </span><div class="clearfix"></div></div></div></div></div></div></div></div></div><footer><div class="footcontent"><div class="footleft footbox"><div class="footupper"><div class="foottopic">Ã€ Propos</div><p>Haade est un blog destinÃ© Ã  aider les particuliers et professionnels Ã  la mise en place dâ€™un systÃ¨me domotique</p></div><div class="footlower"><div class="foottopic">Contactez-nous</div><div class="phone"> <a href="#"><i class="icos phone-volume-solid"></i>+0033 6 99 40 15 86</a></div><div class="email"> <a href="/fr/contact"><i class="icos envelope-solid"></i>Formulaire de contact</a></div></div></div><div class="footmiddle footbox"><div class="foottopic">Liens utiles</div><div><a href="/fr/rgpd">Politique de confidentialitÃ©</a></div><div><a href="/fr/mentions-legales">Mentions legales</a></div><div><a target="_blank" href="https://buildwithmatter.com/">Protocole Matter</a></div><div><a target="_blank" href="https://zigbeealliance.org/fr/%C3%A9v%C3%A9nements/">Zigbee Alliance</a></div><div><a target="_blank" href="https://z-wavealliance.org/category/z-wave-in-the-news/">Z-wave Alliance</a></div><div><a target="_blank" href="https://www.aqara.com/eu/news.html">Aquara by Xiaomi</a></div><div><a target="_blank" href="https://itead.cc/">Itead Sonoff, Nextion</a></div></div><div class="footright footbox"><div class="foottopic">Inscrivez-vous Ã  la Newsletter</div><form action="https://haade.us4.list-manage.com/subscribe/post?u=86f32891957737a57c0b4ade8&amp;id=92dadba2b4" method="post" name="" class="" target="_blank" novalidate> <input type="text" placeholder="Entrez une adresse e-mail"> <input type="submit" name="" value="Envoyer"><div class="media-icons"> <a href="https://github.com/haade-administrator/haade.fr/discussions" target="_blank" alt="github discussion link" aria-label="Continue la discussion sur le forum github"><i class="icob github" aria-hidden="true" title="github discussion"></i></a> <a target="_blank" href="https://www.youtube.com/channel/UCcXJ1ZsjEvQxuWJy7gH-A6w/?sub_confirmation=1" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Abonne toi Ã  notre chaine youtube"><i class="icob youtube" aria-hidden="true" title="youtube"></i></a> <a target="_blank" href="https://discord.gg/FaK6MuZ2" onclick="window.open(this.href, 'width=550,height=435');return false;" aria-label="Invitation sur notre rÃ©seau Discord"><i class="icob discord" aria-hidden="true" title="discord"></i></a> <a href="/fr/feed.xml" target="_blank" alt="feed rss" aria-label="partage le flux rss avec tes amis"><i class="icob rss" aria-hidden="true" title="feed rss haade"></i></a></div></form></div></div><div class="footbottom"><p>Copyright Â© 2024 <a target="_blank" href="https://www.haade.fr">Haade</a> ğŸ‰ by Nicoxygen</p></div></footer></div><script src="/assets/js/main.min.js?v=c497e112b828550ffd680ccbe02d035d" type="text/javascript"></script> <script src="/assets/js/lunrsearchengine-fr.js?v=ceef0e36504019105ad7abc454ff314e"></script>
